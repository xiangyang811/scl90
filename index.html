<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SCL-90 ç—‡çŠ¶è‡ªè¯„é‡è¡¨</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Microsoft YaHei', 'PingFang SC', sans-serif;
        }

        body {
            background-color: #f5f8fa;
            color: #333;
            line-height: 1.6;
            -webkit-tap-highlight-color: transparent;
        }

        /* é¦–é¡µæ ·å¼ - çº¯æ¸å˜èƒŒæ™¯ï¼ˆæ— å¤§è„‘å›¾ç‰‡ï¼‰ */
        #homePage {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            min-height: -webkit-fill-available;
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            position: relative;
            overflow: hidden;
            padding: 20px;
        }

        .glass-container {
            position: relative;
            z-index: 2;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 40px 25px;
            text-align: center;
            width: 100%;
            max-width: 500px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .home-title {
            color: white;
            font-size: 2.2rem;
            margin-bottom: 12px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            font-weight: 700;
            line-height: 1.2;
        }

        .home-subtitle {
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.1rem;
            margin-bottom: 30px;
            font-weight: 300;
        }

        .home-info {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
            text-align: left;
            color: white;
        }

        .home-info h3 {
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
        }

        .home-info h3 i {
            margin-right: 10px;
        }

        .home-info ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }

        .home-info li {
            margin-bottom: 8px;
            line-height: 1.5;
            font-size: 0.95rem;
        }

        /* å…‘æ¢ç æç¤ºå¡ç‰‡ - å·²ä¼˜åŒ–ç¡®ä¿å®Œæ•´æ˜¾ç¤ºï¼Œoverflow: visible */
        .code-access-card {
            background: rgba(255, 255, 255, 0.25);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            color: white;
            position: relative;
            overflow: visible;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: auto;
            word-wrap: break-word;
        }

        .code-access-card:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .code-access-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(to right, #ff9a9e, #fad0c4, #fad0c4, #a1c4fd);
            background-size: 400% 100%;
            animation: gradientMove 3s ease infinite;
        }

        @keyframes gradientMove {

            0%,
            100% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }
        }

        .code-access-card h4 {
            margin-bottom: 12px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            word-break: break-word;
        }

        .code-access-card h4 i {
            margin-right: 10px;
        }

        .code-access-card p {
            font-size: 0.95rem;
            margin-bottom: 15px;
            line-height: 1.5;
            word-break: break-word;
        }

        .code-feature-card {
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.4);
            color: white !important;
            position: relative;
        }

        .code-feature-card::after {
            content: "ğŸ”‘ ç‚¹å‡»è·å–æµ‹è¯•æƒé™";
            position: absolute;
            top: -10px;
            right: 15px;
            background: rgba(255, 255, 255, 0.9);
            color: #2980b9;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            animation: pulseGlow 2s infinite;
        }

        @keyframes pulseGlow {

            0%,
            100% {
                transform: scale(1);
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            }

            50% {
                transform: scale(1.05);
                box-shadow: 0 6px 15px rgba(255, 255, 255, 0.4);
            }
        }

        /* å°çº¢ä¹¦å›¾æ ‡æ ·å¼ */
        .xiaohongshu-icon {
            display: inline-block;
            margin-left: 8px;
            font-size: 1rem;
            color: #ff2442;
            animation: xhsPulse 2s infinite;
        }

        @keyframes xhsPulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }
        }

        .start-btn {
            background: white;
            color: #2980b9;
            border: none;
            padding: 18px 40px;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            margin-top: 15px;
            width: 100%;
            max-width: 300px;
        }

        .start-btn:hover,
        .start-btn:active {
            background: #f8f9fa;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
        }

        .start-btn i {
            margin-left: 10px;
        }

        /* é—®å·é¡µæ ·å¼ */
        #questionnairePage {
            display: none;
        }

        .container {
            width: 100%;
            background: white;
            min-height: 100vh;
            padding: 20px 15px 30px;
        }

        header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eaeaea;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 1.7rem;
        }

        .subtitle {
            color: #7f8c8d;
            font-size: 0.95rem;
            margin-bottom: 20px;
        }

        .instructions {
            background: #f0f7ff;
            border-left: 4px solid #3498db;
            padding: 18px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
            font-size: 0.9rem;
        }

        .progress-container {
            margin: 20px 0 25px;
        }

        .question-counter {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .current-question {
            background: #e8f4fc;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            color: #2980b9;
            font-size: 0.95rem;
        }

        .questions-remaining {
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        .progress-bar {
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #3498db, #2ecc71);
            width: 0%;
            transition: width 0.5s ease;
        }

        .question-text {
            font-size: 1.3rem;
            margin: 25px 0;
            color: #2c3e50;
            font-weight: 500;
            line-height: 1.5;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 25px 0 30px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 18px 15px;
            cursor: pointer;
            transition: all 0.25s;
            display: flex;
            align-items: center;
        }

        .option:hover,
        .option:active {
            background: #e9f7fe;
            border-color: #bde0f7;
        }

        .option.selected {
            background: #d4edff;
            border-color: #3498db;
            font-weight: 600;
            color: #155a8a;
            box-shadow: 0 3px 10px rgba(52, 152, 219, 0.15);
        }

        .option-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2c3e50;
            min-width: 40px;
        }

        .option-label {
            font-size: 1rem;
            color: #555;
            margin-left: 15px;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .question-btn {
            padding: 16px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            margin: 0 5px;
        }

        #prevBtn {
            background: #ecf0f1;
            color: #34495e;
        }

        #prevBtn:hover,
        #prevBtn:active {
            background: #d5dbdd;
        }

        #nextBtn,
        #submitBtn {
            background: linear-gradient(to right, #3498db, #2c80b8);
            color: white;
        }

        #nextBtn:hover,
        #submitBtn:hover,
        #nextBtn:active,
        #submitBtn:active {
            background: linear-gradient(to right, #2980b9, #1c6ea4);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(41, 128, 185, 0.3);
        }

        #submitBtn {
            display: none;
        }

        /* ç»“æœé¡µæ ·å¼ - ä¼˜åŒ–ç‰ˆ */
        .result-container {
            display: none;
            background: #f9fdfe;
            border-radius: 15px;
            padding: 25px 20px;
            margin-top: 20px;
        }

        .result-title {
            color: #27ae60;
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.6rem;
            border-bottom: 2px solid #e8f6f3;
            padding-bottom: 15px;
        }

        /* æ€»ä½“è¯„ä¼°ä¼˜åŒ–ç‰ˆ - ç®€åŒ–å¡ç‰‡ */
        .overall-assessment {
            background: white;
            border-radius: 15px;
            padding: 25px 20px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid #eaeaea;
        }

        .assessment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .assessment-title {
            color: #2c3e50;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
        }

        .assessment-title i {
            margin-right: 10px;
            color: #3498db;
        }

        /* æ€»ä½“è¯„ä¼°æ ‡é¢˜åé¢çš„ç»“æœå­—ä½“æ”¾å¤§ - é¢œè‰²éšç»“æœå˜åŒ– */
        .assessment-result-tag {
            padding: 8px 18px;
            border-radius: 20px;
            font-weight: 700;
            font-size: 1.3rem;
        }

        .result-tag-good {
            background: #e8f6f3;
            color: #27ae60;
            border: 1px solid #b8e6cf;
        }

        .result-tag-normal {
            background: #fff8e1;
            color: #f39c12;
            border: 1px solid #f8e1a6;
        }

        .result-tag-concern {
            background: #ffebee;
            color: #e74c3c;
            border: 1px solid #ffcdd2;
        }

        .result-tag-severe {
            background: #fdeaea;
            color: #c0392b;
            border: 1px solid #f5c6c6;
        }

        .assessment-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .assessment-item {
            background: #f8fafc;
            padding: 20px 15px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #eaeaea;
        }

        /* æ‰‹æœºç«¯æ€»åˆ†å­—ä½“æ”¾å¤§ */
        .assessment-value {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        /* æ€»åˆ†é¢œè‰²è§„åˆ™ - ä¼˜åŒ–ï¼Œæ­£å¸¸çŠ¶æ€ç”¨ç»¿è‰² */
        .score-excellent {
            color: #27ae60;
            /* ç»¿è‰² - ä¼˜ç§€/è‰¯å¥½ */
        }

        .score-good {
            color: #27ae60;
            /* ç»¿è‰² - è‰¯å¥½çŠ¶æ€ */
        }

        .score-moderate {
            color: #f39c12;
            /* æ©™è‰² - ä¸­ç­‰/éœ€è¦æ³¨æ„ */
        }

        .score-concern {
            color: #e74c3c;
            /* çº¢è‰² - éœ€è¦å…³æ³¨ */
        }

        .score-serious {
            color: #c0392b;
            /* æ·±çº¢è‰² - ä¸¥é‡ */
        }

        .assessment-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-bottom: 8px;
        }

        .assessment-note {
            font-size: 0.8rem;
            color: #95a5a6;
        }

        .health-indicator {
            grid-column: span 2;
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #eaeaea;
            margin-top: 10px;
        }

        .indicator-title {
            font-size: 1.1rem;
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
        }

        .indicator-bar {
            height: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
            position: relative;
        }

        .indicator-fill {
            height: 100%;
            background: linear-gradient(to right, #2ecc71, #f1c40f, #e74c3c);
            border-radius: 10px;
            transition: width 1s ease;
        }

        .indicator-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #7f8c8d;
            margin-top: 5px;
        }

        /* æ‰‹æœºç«¯æŒ‡ç¤ºå™¨æ–‡æœ¬åŠ å¤§ - å¿ƒç†å¥åº·æŒ‡ç¤ºå™¨ä¸‹æ–¹çš„ç»“æœå­—å·åŠ å¤§ï¼Œé¢œè‰²éšç»“æœå˜åŒ– */
        .indicator-level {
            text-align: center;
            margin-top: 15px;
            font-weight: 700;
            font-size: 1.4rem;
            padding: 10px;
            border-radius: 10px;
        }

        .health-level-good {
            color: #27ae60;
            background-color: #e8f6f3;
        }

        .health-level-normal {
            color: #f39c12;
            background-color: #fff8e1;
        }

        .health-level-concern {
            color: #e74c3c;
            background-color: #ffebee;
        }

        .health-level-severe {
            color: #c0392b;
            background-color: #fdeaea;
        }

        /* ç»´åº¦å¾—åˆ†è¯¦æƒ… - 9å®«æ ¼å¸ƒå±€ */
        .factor-results {
            margin-top: 30px;
        }

        .factor-title {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
        }

        .factor-title i {
            margin-right: 10px;
            color: #e74c3c;
        }

        /* æœ€ä¸¥é‡å› å­å•ç‹¬å±•ç¤º */
        .top-factor-container {
            margin-bottom: 25px;
        }

        .top-factor-card {
            background: linear-gradient(135deg, #fff8f0 0%, #fff0e0 100%);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid #f39c12;
            box-shadow: 0 5px 15px rgba(243, 156, 18, 0.1);
        }

        .top-factor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .top-factor-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: #e67e22;
        }

        .top-factor-score {
            font-size: 1.8rem;
            font-weight: 800;
            color: #e74c3c;
        }

        .top-factor-bar {
            height: 12px;
            background: #ecf0f1;
            border-radius: 6px;
            overflow: hidden;
            margin: 15px 0;
        }

        .top-factor-fill {
            height: 100%;
            background: linear-gradient(to right, #f39c12, #e74c3c);
            border-radius: 6px;
        }

        .top-factor-interpretation {
            font-size: 0.95rem;
            color: #7f8c8d;
            margin-top: 12px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
        }

        /* 9å®«æ ¼å¸ƒå±€ - å®«æ ¼å†…çš„æ•°å­—å­—å·åŠ å¤§ï¼Œå¼ºåŒ–è§†è§‰å¯¹æ¯” */
        .factor-grid-9 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 20px;
        }

        .factor-item {
            background: white;
            border-radius: 10px;
            padding: 15px 10px;
            text-align: center;
            border: 1px solid #eaeaea;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .factor-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 12px rgba(0, 0, 0, 0.1);
        }

        .factor-item-name {
            font-size: 0.9rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* å®«æ ¼å†…æ•°å­—å­—å·åŠ å¤§ */
        .factor-item-score {
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 5px;
        }

        .factor-item-status {
            font-size: 0.8rem;
            font-weight: 600;
            padding: 3px 8px;
            border-radius: 10px;
            display: inline-block;
        }

        .status-normal {
            background-color: #e8f6f3;
            color: #27ae60;
        }

        .status-mild {
            background-color: #fff8e1;
            color: #f39c12;
        }

        .status-moderate {
            background-color: #ffebee;
            color: #e74c3c;
        }

        .status-severe {
            background-color: #fdeaea;
            color: #c0392b;
        }

        /* å› å­è¯¦ç»†è§£è¯»åŒºåŸŸ - åœ¨å®«æ ¼ä¸‹æ–¹å±•ç¤º */
        .factor-detail-expanded {
            margin-top: 15px;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            border: 2px solid #3498db;
            animation: fadeIn 0.3s ease;
            display: none;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .factor-detail-expanded.active {
            display: block;
        }

        .expanded-factor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eaeaea;
        }

        .expanded-factor-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: #2c3e50;
        }

        .expanded-factor-score {
            font-size: 1.8rem;
            font-weight: 800;
        }

        .expanded-factor-bar {
            height: 12px;
            background: #ecf0f1;
            border-radius: 6px;
            overflow: hidden;
            margin: 15px 0;
        }

        .expanded-factor-fill {
            height: 100%;
            border-radius: 6px;
        }

        .expanded-factor-description {
            font-size: 0.95rem;
            color: #7f8c8d;
            margin-top: 15px;
            line-height: 1.6;
        }

        .expanded-factor-suggestion {
            background: #f0f7ff;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid #3498db;
        }

        .expanded-factor-suggestion h5 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .expanded-factor-suggestion h5 i {
            margin-right: 8px;
            color: #3498db;
        }

        .expanded-factor-suggestion p {
            color: #555;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .expanded-factor-close {
            text-align: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eaeaea;
        }

        .expanded-factor-close button {
            background: #ecf0f1;
            color: #34495e;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .expanded-factor-close button:hover {
            background: #d5dbdd;
        }

        /* å› å­è¯¦ç»†è§£è¯» - åœ¨æ‰‹æœºç«¯ä¹Ÿè¦ä¿æŒä¸¤åˆ— */
        .factor-details {
            margin-top: 30px;
        }

        .factor-details-title {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
        }

        .factor-details-title i {
            margin-right: 10px;
            color: #3498db;
        }

        .factor-details-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .factor-detail-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            border-top: 4px solid #3498db;
        }

        .factor-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .factor-detail-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .factor-detail-score {
            font-size: 1.4rem;
            font-weight: 700;
        }

        .factor-detail-bar {
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            overflow: hidden;
            margin: 15px 0;
        }

        .factor-detail-fill {
            height: 100%;
            background: linear-gradient(to right, #3498db, #2ecc71);
            border-radius: 5px;
        }

        .factor-detail-interpretation {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-top: 12px;
            padding: 12px;
            background: #f9f9f9;
            border-radius: 8px;
        }

        /* ç»“æœè§£è¯»ä¼˜åŒ– */
        .interpretation-section {
            margin-top: 35px;
        }

        .interpretation-title {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .interpretation-title i {
            margin-right: 10px;
            color: #f39c12;
        }

        .interpretation-content {
            background: white;
            border-radius: 12px;
            padding: 25px 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            border-left: 4px solid #f39c12;
        }

        .interpretation-section h4 {
            color: #2c3e50;
            margin: 20px 0 12px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .interpretation-section h4 i {
            margin-right: 8px;
            color: #3498db;
        }

        /* è¯„ä¼°ç­‰çº§ç»“æœå­—ä½“åŠ å¤§ */
        .assessment-result-display {
            font-size: 1.4rem;
            font-weight: 800;
            margin-left: 8px;
        }

        .result-good {
            color: #27ae60;
        }

        .result-normal {
            color: #f39c12;
        }

        .result-concern {
            color: #e74c3c;
        }

        .interpretation-section p {
            color: #555;
            line-height: 1.7;
            margin-bottom: 15px;
            font-size: 0.97rem;
        }

        .interpretation-section ul {
            padding-left: 20px;
            margin: 10px 0 15px;
        }

        .interpretation-section li {
            margin-bottom: 10px;
            line-height: 1.6;
            color: #555;
        }

        .recommendation-box {
            background: #f0f7ff;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
        }

        .recommendation-box h5 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .recommendation-box h5 i {
            margin-right: 8px;
            color: #3498db;
        }

        .caution-box {
            background: #fff8f0;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #f39c12;
        }

        .caution-box h5 {
            color: #e74c3c;
            margin-bottom: 15px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .caution-box h5 i {
            margin-right: 8px;
            color: #e74c3c;
        }

        .action-steps {
            background: #e8f6f3;
            border-radius: 10px;
            padding: 25px 20px;
            margin-top: 25px;
        }

        .action-steps h5 {
            color: #27ae60;
            margin-bottom: 18px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
        }

        .action-steps h5 i {
            margin-right: 10px;
        }

        .step {
            display: flex;
            margin-bottom: 20px;
            align-items: flex-start;
        }

        .step-number {
            background: #27ae60;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .step-content h6 {
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .step-content p {
            color: #555;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .resources-list {
            margin-top: 25px;
        }

        .resource-item {
            background: white;
            border-radius: 10px;
            padding: 18px;
            margin-bottom: 15px;
            border: 1px solid #eaeaea;
        }

        .resource-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }

        .resource-title i {
            margin-right: 10px;
            color: #3498db;
        }

        .restart-btn {
            display: block;
            margin: 40px auto 0;
            background: linear-gradient(to right, #27ae60, #219955);
            color: white;
            border: none;
            padding: 18px 35px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
            width: 100%;
            max-width: 300px;
        }

        .restart-btn:hover,
        .restart-btn:active {
            background: linear-gradient(to right, #219955, #1e8449);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(39, 174, 96, 0.4);
        }

        /* å…‘æ¢ç å¼¹çª—æ ·å¼ */
        .code-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(3px);
            padding: 15px;
        }

        .code-modal.active {
            display: flex;
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .modal-content {
            background: white;
            padding: 25px 20px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            max-width: 500px;
            width: 100%;
            text-align: center;
            position: relative;
            border: 2px solid #3498db;
            animation: modalSlideUp 0.3s ease;
        }

        @keyframes modalSlideUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-close {
            position: absolute;
            top: 12px;
            right: 15px;
            font-size: 1.6rem;
            cursor: pointer;
            color: #3498db;
            transition: all 0.3s ease;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .modal-close:hover {
            color: #2980b9;
            background-color: rgba(52, 152, 219, 0.2);
            transform: rotate(90deg);
        }

        .modal-icon {
            font-size: 3rem;
            color: #3498db;
            margin-bottom: 15px;
        }

        .modal-title {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.5rem;
        }

        .modal-description {
            color: #7f8c8d;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .code-input {
            width: 100%;
            padding: 16px 18px;
            border: 2px solid #3498db;
            border-radius: 12px;
            font-size: 1.1rem;
            margin-bottom: 15px;
            text-align: center;
            transition: all 0.3s ease;
            background-color: #f8f9fa;
            color: #2c3e50;
            font-weight: 600;
        }

        .code-input:focus {
            outline: none;
            border-color: #2980b9;
            box-shadow: 0 0 0 3px rgba(41, 128, 185, 0.2);
            transform: translateY(-2px);
        }

        .code-error {
            color: #e74c3c;
            margin-bottom: 15px;
            min-height: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .modal-buttons button {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(to right, #3498db, #2c80b8);
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(to right, #2980b9, #1c6ea4);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(41, 128, 185, 0.3);
        }

        .btn-secondary {
            background: #ecf0f1;
            color: #34495e;
        }

        .btn-secondary:hover {
            background: #d5dbdd;
        }

        .modal-footer-info {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eaeaea;
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        .modal-footer-info i {
            color: #3498db;
            margin-right: 8px;
        }

        /* å“åº”å¼è°ƒæ•´ - æ‰‹æœºç«¯ä¼˜åŒ– */
        @media (max-width: 767px) {

            /* é¦–é¡µä¼˜åŒ– */
            .glass-container {
                padding: 30px 20px;
            }

            .home-title {
                font-size: 1.8rem;
            }

            .home-subtitle {
                font-size: 1rem;
            }

            .code-access-card {
                padding: 15px;
                margin: 15px 0;
            }

            .code-access-card h4 {
                font-size: 1.1rem;
            }

            .code-access-card p {
                font-size: 0.9rem;
                line-height: 1.4;
            }

            .code-feature-card::after {
                content: "ğŸ”‘ ç‚¹å‡»è·å–æµ‹è¯•æƒé™";
                font-size: 0.7rem;
                padding: 5px 10px;
                right: 10px;
            }

            .start-btn {
                padding: 16px 30px;
                font-size: 1.1rem;
            }

            /* ç»“æœé¡µæ‰‹æœºç«¯ä¼˜åŒ– */
            .result-container {
                padding: 20px 15px;
            }

            .result-title {
                font-size: 1.4rem;
            }

            /* æ€»ä½“è¯„ä¼°ä¼˜åŒ– - æ‰‹æœºç«¯æ€»åˆ†å­—ä½“æ”¾å¤§ */
            .assessment-value {
                font-size: 2.4rem !important;
                /* æ‰‹æœºç«¯åŠ å¤§ */
            }

            .assessment-label {
                font-size: 0.9rem;
            }

            /* æ€»ä½“è¯„ä¼°æ ‡é¢˜åé¢çš„ç»“æœå­—ä½“æ”¾å¤§ */
            .assessment-result-tag {
                font-size: 1.2rem;
                padding: 6px 14px;
            }

            .assessment-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            .assessment-item {
                padding: 15px 10px;
            }

            .health-indicator {
                padding: 15px;
                margin-top: 15px;
            }

            .indicator-title {
                font-size: 1rem;
            }

            /* æ‰‹æœºç«¯æŒ‡ç¤ºå™¨æ–‡æœ¬åŠ å¤§ */
            .indicator-level {
                font-size: 1.5rem !important;
                margin-top: 12px;
                padding: 12px;
            }

            .indicator-labels {
                font-size: 0.75rem;
            }

            /* 9å®«æ ¼å¸ƒå±€ - æ‰‹æœºç«¯ */
            .factor-grid-9 {
                grid-template-columns: repeat(3, 1fr);
                gap: 10px;
            }

            .factor-item {
                padding: 12px 8px;
            }

            .factor-item-name {
                font-size: 0.85rem;
            }

            /* å®«æ ¼å†…æ•°å­—å­—å·åŠ å¤§ - æ‰‹æœºç«¯ */
            .factor-item-score {
                font-size: 1.6rem;
            }

            /* å› å­è¯¦ç»†å±•å¼€åŒºåŸŸ - æ‰‹æœºç«¯ä¼˜åŒ– */
            .factor-detail-expanded {
                padding: 15px;
            }

            .expanded-factor-name {
                font-size: 1.1rem;
            }

            .expanded-factor-score {
                font-size: 1.5rem;
            }

            .top-factor-card {
                padding: 15px;
            }

            .top-factor-name {
                font-size: 1.1rem;
            }

            .top-factor-score {
                font-size: 1.6rem;
            }

            /* å› å­è¯¦ç»†è§£è¯» - æ‰‹æœºç«¯ä¿æŒä¸¤åˆ— */
            .factor-details-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            .interpretation-content {
                padding: 20px 15px;
            }

            .interpretation-title {
                font-size: 1.2rem;
            }

            /* è¯„ä¼°ç­‰çº§ç»“æœå­—ä½“åŠ å¤§ */
            .assessment-result-display {
                font-size: 1.5rem !important;
            }

            .interpretation-section h4 {
                font-size: 1rem;
            }

            .recommendation-box,
            .caution-box {
                padding: 15px;
            }

            .action-steps {
                padding: 20px 15px;
            }

            .step {
                margin-bottom: 15px;
            }

            .step-number {
                width: 25px;
                height: 25px;
                font-size: 0.9rem;
                margin-right: 12px;
            }

            .step-content h6 {
                font-size: 0.95rem;
            }

            .step-content p {
                font-size: 0.9rem;
            }

            .resource-item {
                padding: 15px;
            }

            .restart-btn {
                padding: 16px 30px;
                font-size: 1rem;
            }
        }

        @media (min-width: 768px) {
            .container {
                max-width: 800px;
                margin: 0 auto;
                padding: 30px 25px;
                border-radius: 15px;
                margin-top: 20px;
                margin-bottom: 20px;
                box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            }

            .assessment-grid {
                grid-template-columns: repeat(4, 1fr);
            }

            .health-indicator {
                grid-column: span 4;
            }

            .factor-grid-9 {
                grid-template-columns: repeat(3, 1fr);
                gap: 15px;
            }

            .factor-details-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }

            .step {
                margin-bottom: 25px;
            }

            .modal-content {
                padding: 30px 25px;
            }

            /* å®«æ ¼å†…æ•°å­—å­—å·åŠ å¤§ - æ¡Œé¢ç«¯ */
            .factor-item-score {
                font-size: 2rem;
            }
        }

        /* é˜²æ­¢ç§»åŠ¨ç«¯ç‚¹å‡»å»¶è¿Ÿ */
        @media (hover: none) and (pointer: coarse) {

            .option,
            .question-btn,
            .start-btn,
            .restart-btn {
                cursor: default;
            }
        }
    </style>
</head>

<body>
    <!-- å…‘æ¢ç å¼¹çª— -->
    <div id="code-modal" class="code-modal">
        <div class="modal-content">
            <div class="modal-close" id="modal-close">&times;</div>
            <div class="modal-icon">
                <i class="fas fa-key"></i>
            </div>
            <h2 class="modal-title">è¯·è¾“å…¥å…‘æ¢ç </h2>
            <p class="modal-description">è¯·è¾“å…¥æ‚¨è·å–çš„å…‘æ¢ç ï¼ŒéªŒè¯é€šè¿‡åå³å¯å¼€å§‹SCL-90ç—‡çŠ¶è‡ªè¯„æµ‹è¯•</p>

            <input type="text" id="code-input" class="code-input" placeholder="è¾“å…¥å…‘æ¢ç ï¼ˆå¦‚ï¼šPSYCH001ï¼‰">
            <div id="code-error" class="code-error"></div>

            <div class="modal-buttons">
                <button id="cancel-btn" class="btn btn-secondary">å–æ¶ˆ</button>
                <button id="confirm-btn" class="btn btn-primary">ç¡®è®¤</button>
            </div>

            <div class="modal-footer-info">
                <p>
                    <i class="fas fa-info-circle"></i> æç¤ºï¼šæ¯ä¸ªå…‘æ¢ç ä»…é™ä½¿ç”¨ä¸€æ¬¡ï¼ŒéªŒè¯æˆåŠŸå24å°æ—¶å†…å¯æ— é™æ¬¡è®¿é—®
                </p>
            </div>
        </div>
    </div>

    <!-- é¦–é¡µ -->
    <div id="homePage">
        <div class="glass-container">
            <h1 class="home-title">SCL-90 ç—‡çŠ¶è‡ªè¯„é‡è¡¨</h1>
            <p class="home-subtitle">ä¸“ä¸šå¿ƒç†å¥åº·è¯„ä¼°å·¥å…·</p>

            <div class="home-info">
                <h3><i class="fas fa-info-circle"></i> å…³äºæœ¬æµ‹è¯•</h3>
                <p>SCL-90æ˜¯å›½é™…é€šç”¨çš„å¿ƒç†å¥åº·æµ‹è¯•é‡è¡¨ï¼Œç”¨äºè¯„ä¼°ä¸ªä½“åœ¨ä¸€æ®µæ—¶é—´å†…çš„å¿ƒç†ç—‡çŠ¶å’Œå¥åº·çŠ¶å†µã€‚</p>
                <ul>
                    <li>åŒ…å«90ä¸ªè¯„ä¼°é¡¹ç›®</li>
                    <li>æ¶µç›–10ä¸ªå¿ƒç†ç—‡çŠ¶ç»´åº¦</li>
                    <li>æµ‹è¯•æ—¶é—´çº¦10-15åˆ†é’Ÿ</li>
                    <li>é€‚ç”¨16å²ä»¥ä¸Šäººç¾¤</li>
                </ul>
                <p><strong>è¯„åˆ†æ ‡å‡†ï¼š</strong>0=ä»æ— ï¼Œ1=è½»åº¦ï¼Œ2=ä¸­åº¦ï¼Œ3=è¾ƒé‡ï¼Œ4=éå¸¸é‡</p>
            </div>

            <div class="code-access-card code-feature-card" id="getCodeCard">
                <h4><i class="fas fa-lock"></i> æµ‹è¯•æƒé™è¯´æ˜</h4>
                <p>æœ¬æµ‹è¯•éœ€è¦å…‘æ¢ç éªŒè¯æ‰èƒ½å¼€å§‹ï¼Œç¡®ä¿æµ‹è¯•çš„ä¸“ä¸šæ€§å’Œå‡†ç¡®æ€§ã€‚</p>
                <p>è·å–å…‘æ¢ç åï¼Œ24å°æ—¶å†…å¯æ— é™æ¬¡ä½¿ç”¨å®Œæ•´æµ‹è¯•åŠŸèƒ½ã€‚</p>
                <p style="margin-top: 10px; font-weight: 600; font-size: 0.9rem;">
                    <i class="fas fa-shopping-cart"></i> ç‚¹å‡»ä¸Šæ–¹å¡ç‰‡å‰å¾€å°çº¢ä¹¦è·å–å…‘æ¢ç 
                    <span class="xiaohongshu-icon">ğŸ“•</span>
                </p>
            </div>

            <button class="start-btn" id="startBtn">
                å¼€å§‹æµ‹è¯• <i class="fas fa-arrow-right"></i>
            </button>

            <div style="margin-top: 25px; color: rgba(255, 255, 255, 0.85); font-size: 0.85rem;">
                <p><i class="fas fa-shield-alt"></i> æ‚¨çš„æ•°æ®ä»…ä¿å­˜åœ¨æœ¬åœ°ï¼Œç¡®ä¿éšç§å®‰å…¨</p>
            </div>
        </div>
    </div>

    <!-- é—®å·é¡µé¢ -->
    <div id="questionnairePage">
        <div class="container">
            <header>
                <h1>SCL-90 ç—‡çŠ¶è‡ªè¯„é‡è¡¨</h1>
                <p class="subtitle">è¯·æ ¹æ®"æœ€è¿‘ä¸€å‘¨"çš„çœŸå®æ„Ÿå—ä½œç­”</p>
                <div class="instructions">
                    <p><strong>æŒ‡å¯¼è¯­ï¼š</strong>è¯·ä»”ç»†é˜…è¯»æ¯ä¸€æ¡é™ˆè¿°ï¼Œæ ¹æ®<strong>æœ€è¿‘ä¸€å‘¨ï¼ˆåŒ…æ‹¬ä»Šå¤©ï¼‰</strong>çš„å®é™…æ„Ÿè§‰ï¼Œé€‰æ‹©æœ€ç¬¦åˆæ‚¨æƒ…å†µçš„é€‰é¡¹ã€‚</p>
                    <p><strong>è¯„åˆ†è¯´æ˜ï¼š</strong>0=ä»æ— ï¼Œ1=è½»åº¦ï¼Œ2=ä¸­åº¦ï¼Œ3=è¾ƒé‡ï¼Œ4=éå¸¸é‡ã€‚</p>
                </div>
            </header>

            <div class="progress-container">
                <div class="question-counter">
                    <div class="current-question" id="counter">ç¬¬ 1 / 90 é¢˜</div>
                    <div class="questions-remaining" id="remaining">å‰©ä½™ 89 é¢˜</div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress"></div>
                </div>
            </div>

            <div id="questionContainer">
                <div class="question-text" id="questionText">å¤´ç—›ã€‚</div>
                <div class="options" id="optionsContainer">
                    <div class="option" data-value="0">
                        <div class="option-value">0</div>
                        <div class="option-label">ä»æ— ï¼ˆæ²¡æœ‰è¯¥ç—‡çŠ¶ï¼‰</div>
                    </div>
                    <div class="option" data-value="1">
                        <div class="option-value">1</div>
                        <div class="option-label">è½»åº¦ï¼ˆå¶å°”æœ‰ï¼Œç¨‹åº¦è½»å¾®ï¼‰</div>
                    </div>
                    <div class="option" data-value="2">
                        <div class="option-value">2</div>
                        <div class="option-label">ä¸­åº¦ï¼ˆç»å¸¸æœ‰ï¼Œç¨‹åº¦ä¸­ç­‰ï¼‰</div>
                    </div>
                    <div class="option" data-value="3">
                        <div class="option-value">3</div>
                        <div class="option-label">è¾ƒé‡ï¼ˆé¢‘ç¹æœ‰ï¼Œç¨‹åº¦è¾ƒé‡ï¼‰</div>
                    </div>
                    <div class="option" data-value="4">
                        <div class="option-value">4</div>
                        <div class="option-label">éå¸¸é‡ï¼ˆæŒç»­æœ‰ï¼Œç¨‹åº¦ä¸¥é‡ï¼‰</div>
                    </div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="question-btn" id="prevBtn" disabled><i class="fas fa-chevron-left"></i> ä¸Šä¸€é¢˜</button>
                <button class="question-btn" id="nextBtn">ä¸‹ä¸€é¢˜ <i class="fas fa-chevron-right"></i></button>
                <button class="question-btn" id="submitBtn">æäº¤é—®å· <i class="fas fa-check-circle"></i></button>
            </div>

            <!-- ç»“æœé¡µé¢ -->
            <div class="result-container" id="resultContainer">
                <h2 class="result-title"><i class="fas fa-chart-line"></i> SCL-90 æµ‹è¯„ç»“æœ</h2>

                <!-- æ€»ä½“è¯„ä¼°ä¼˜åŒ–ç‰ˆ -->
                <div class="overall-assessment">
                    <div class="assessment-header">
                        <h3 class="assessment-title"><i class="fas fa-clipboard-check"></i> æ€»ä½“è¯„ä¼°</h3>
                        <div class="assessment-result-tag" id="overallResultTag">æ­£å¸¸</div>
                    </div>
                    <div class="assessment-grid" id="summaryGrid">
                        <!-- è¿™é‡Œå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>

                    <div class="health-indicator">
                        <div class="indicator-title">å¿ƒç†å¥åº·çŠ¶æ€æŒ‡ç¤ºå™¨</div>
                        <div class="indicator-bar">
                            <div class="indicator-fill" id="healthIndicator"></div>
                        </div>
                        <div class="indicator-labels">
                            <span>è‰¯å¥½</span>
                            <span>æ­£å¸¸</span>
                            <span>å…³æ³¨</span>
                            <span>éœ€è¦é‡è§†</span>
                        </div>
                        <div class="indicator-level" id="healthLevel">è¯„ä¼°ä¸­...</div>
                    </div>
                </div>

                <!-- å„ç»´åº¦å¾—åˆ†è¯¦æƒ… - ä¼˜åŒ–ä¸º9å®«æ ¼å¸ƒå±€ -->
                <div class="factor-results">
                    <h3 class="factor-title"><i class="fas fa-chart-bar"></i> å„ç»´åº¦å¾—åˆ†è¯¦æƒ…</h3>

                    <!-- æœ€ä¸¥é‡å› å­å•ç‹¬å±•ç¤º -->
                    <div class="top-factor-container" id="topFactorContainer">
                        <!-- è¿™é‡Œå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>

                    <!-- 9å®«æ ¼å¸ƒå±€å±•ç¤ºå…¶ä»–å› å­ -->
                    <div class="factor-grid-9" id="factorGrid9">
                        <!-- è¿™é‡Œå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>

                    <!-- å› å­è¯¦æƒ…å±•å¼€åŒºåŸŸ -->
                    <div id="factorDetailExpanded" class="factor-detail-expanded">
                        <!-- è¿™é‡Œå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>

                <!-- å› å­è¯¦ç»†è§£è¯» -->
                <div class="factor-details" id="factorDetails">
                    <!-- è¿™é‡Œå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>

                <!-- ä¼˜åŒ–åçš„ç»“æœè§£è¯»ä¸å»ºè®® -->
                <div class="interpretation-section" id="detailedInterpretation">
                    <!-- è¿™é‡Œå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>

                <!-- é‡æ–°æµ‹è¯•æŒ‰é’® -->
                <button class="restart-btn" id="restartBtn">
                    <i class="fas fa-redo"></i> é‡æ–°æµ‹è¯•
                </button>
            </div>
        </div>
    </div>

    <script>
        // SCL-90å®Œæ•´é¢˜ç›®ï¼ˆ90é¡¹ï¼‰
        const scl90Questions = [
            "å¤´ç—›ã€‚", "ç¥ç»è¿‡æ•ï¼Œå¿ƒä¸­ä¸è¸å®ã€‚", "å¤´è„‘ä¸­æœ‰ä¸å¿…è¦çš„æƒ³æ³•æˆ–å­—å¥ç›˜æ—‹ã€‚", "å¤´æ˜æˆ–æ˜å€’ã€‚", "å¯¹å¼‚æ€§çš„å…´è¶£å‡é€€ã€‚",
            "å¯¹æ—äººè´£å¤‡æ±‚å…¨ã€‚", "æ„Ÿåˆ°åˆ«äººèƒ½æ§åˆ¶æ‚¨çš„æ€æƒ³ã€‚", "è´£æ€ªåˆ«äººåˆ¶é€ éº»çƒ¦ã€‚", "å¿˜è®°æ€§å¤§ã€‚", "æ‹…å¿ƒè‡ªå·±çš„è¡£é¥°æ•´é½åŠä»ªæ€çš„ç«¯æ­£ã€‚",
            "å®¹æ˜“çƒ¦æ¼å’Œæ¿€åŠ¨ã€‚", "èƒ¸ç—›ã€‚", "å®³æ€•ç©ºæ—·çš„åœºæ‰€æˆ–è¡—é“ã€‚", "æ„Ÿåˆ°è‡ªå·±çš„ç²¾åŠ›ä¸‹é™ï¼Œæ´»åŠ¨å‡æ…¢ã€‚", "æƒ³ç»“æŸè‡ªå·±çš„ç”Ÿå‘½ã€‚",
            "å¬åˆ°æ—äººå¬ä¸åˆ°çš„å£°éŸ³ã€‚", "å‘æŠ–ã€‚", "æ„Ÿåˆ°å¤§å¤šæ•°äººéƒ½ä¸å¯ä¿¡ä»»ã€‚", "èƒƒå£ä¸å¥½ã€‚", "å®¹æ˜“å“­æ³£ã€‚",
            "åŒå¼‚æ€§ç›¸å¤„æ—¶æ„Ÿåˆ°å®³ç¾ä¸è‡ªåœ¨ã€‚", "æ„Ÿåˆ°å—éª—ï¼Œä¸­äº†åœˆå¥—æˆ–æœ‰äººæƒ³æŠ“ä½æ‚¨ã€‚", "æ— ç¼˜æ— æ•…åœ°çªç„¶æ„Ÿåˆ°å®³æ€•ã€‚", "è‡ªå·±ä¸èƒ½æ§åˆ¶åœ°å¤§å‘è„¾æ°”ã€‚", "æ€•å•ç‹¬å‡ºé—¨ã€‚",
            "ç»å¸¸è´£æ€ªè‡ªå·±ã€‚", "è…°ç—›ã€‚", "æ„Ÿåˆ°éš¾ä»¥å®Œæˆä»»åŠ¡ã€‚", "æ„Ÿåˆ°å­¤ç‹¬ã€‚", "æ„Ÿåˆ°è‹¦é—·ã€‚",
            "è¿‡åˆ†æ‹…å¿§ã€‚", "å¯¹äº‹ç‰©ä¸æ„Ÿå…´è¶£ã€‚", "æ„Ÿåˆ°å®³æ€•ã€‚", "æ‚¨çš„æ„Ÿæƒ…å®¹æ˜“å—åˆ°ä¼¤å®³ã€‚", "æ—äººèƒ½çŸ¥é“æ‚¨çš„ç§ä¸‹æƒ³æ³•ã€‚",
            "æ„Ÿåˆ°åˆ«äººä¸ç†è§£æ‚¨ã€ä¸åŒæƒ…æ„«æ‚¨ã€‚", "æ„Ÿåˆ°äººä»¬å¯¹æ‚¨ä¸å‹å¥½ï¼Œä¸å–œæ¬¢æ‚¨ã€‚", "åšäº‹å¿…é¡»åšå¾—å¾ˆæ…¢ä»¥ä¿è¯åšå¾—æ­£ç¡®ã€‚", "å¿ƒè·³å¾—å¾ˆå‰å®³ã€‚", "æ¶å¿ƒæˆ–èƒƒéƒ¨ä¸èˆ’æœã€‚",
            "æ„Ÿåˆ°æ¯”ä¸ä¸Šä»–äººã€‚", "è‚Œè‚‰é…¸ç—›ã€‚", "æ„Ÿåˆ°æœ‰äººåœ¨ç›‘è§†æ‚¨ã€è°ˆè®ºæ‚¨ã€‚", "éš¾ä»¥å…¥ç¡ã€‚", "åšäº‹å¿…é¡»åå¤æ£€æŸ¥ã€‚",
            "éš¾ä»¥ä½œå‡ºå†³å®šã€‚", "æ€•ä¹˜ç”µè½¦ã€å…¬å…±æ±½è½¦ã€åœ°é“æˆ–ç«è½¦ã€‚", "å‘¼å¸æœ‰å›°éš¾ã€‚", "ä¸€é˜µé˜µå‘å†·æˆ–å‘çƒ­ã€‚", "å› ä¸ºæ„Ÿåˆ°å®³æ€•è€Œé¿å¼€æŸäº›ä¸œè¥¿ã€åœºåˆæˆ–æ´»åŠ¨ã€‚",
            "è„‘å­å˜ç©ºäº†ã€‚", "èº«ä½“å‘éº»æˆ–åˆºç—›ã€‚", "å–‰å’™æœ‰æ¢—å¡æ„Ÿã€‚", "æ„Ÿåˆ°å‰é€”æ²¡æœ‰å¸Œæœ›ã€‚", "ä¸èƒ½é›†ä¸­æ³¨æ„ã€‚",
            "æ„Ÿåˆ°èº«ä½“çš„æŸä¸€éƒ¨åˆ†è½¯å¼±æ— åŠ›ã€‚", "æ„Ÿåˆ°ç´§å¼ æˆ–å®¹æ˜“ç´§å¼ ã€‚", "æ„Ÿåˆ°æ‰‹æˆ–è„šå‘é‡ã€‚", "æƒ³åˆ°æ­»äº¡çš„äº‹ã€‚", "åƒå¾—å¤ªå¤šã€‚",
            "å½“åˆ«äººçœ‹ç€æ‚¨æˆ–è°ˆè®ºæ‚¨æ—¶æ„Ÿåˆ°ä¸è‡ªåœ¨ã€‚", "æœ‰ä¸€äº›ä¸å±äºæ‚¨è‡ªå·±çš„æƒ³æ³•ã€‚", "æœ‰æƒ³æ‰“äººæˆ–ä¼¤å®³ä»–äººçš„å†²åŠ¨ã€‚", "é†’å¾—å¤ªæ—©ã€‚", "å¿…é¡»åå¤æ´—æ‰‹ã€ç‚¹æ•°ç›®æˆ–è§¦æ‘¸æŸäº›ä¸œè¥¿ã€‚",
            "ç¡å¾—ä¸ç¨³ä¸æ·±ã€‚", "æœ‰æƒ³æ‘”åæˆ–ç ´åä¸œè¥¿çš„å†²åŠ¨ã€‚", "æœ‰ä¸€äº›åˆ«äººæ²¡æœ‰çš„æƒ³æ³•æˆ–å¿µå¤´ã€‚", "æ„Ÿåˆ°å¯¹åˆ«äººç¥ç»è¿‡æ•ã€‚", "åœ¨å•†åº—æˆ–ç”µå½±é™¢ç­‰äººå¤šçš„åœ°æ–¹æ„Ÿåˆ°ä¸è‡ªåœ¨ã€‚",
            "æ„Ÿåˆ°ä»»ä½•äº‹æƒ…éƒ½å¾ˆå›°éš¾ã€‚", "ä¸€é˜µé˜µææƒ§æˆ–æƒŠæã€‚", "æ„Ÿåˆ°åœ¨å…¬å…±åœºåˆåƒä¸œè¥¿å¾ˆä¸èˆ’æœã€‚", "ç»å¸¸ä¸äººäº‰è®ºã€‚", "å•ç‹¬ä¸€äººæ—¶ç¥ç»å¾ˆç´§å¼ ã€‚",
            "åˆ«äººå¯¹æ‚¨çš„æˆç»©æ²¡æœ‰ä½œå‡ºæ°å½“çš„è¯„ä»·ã€‚", "å³ä½¿å’Œåˆ«äººåœ¨ä¸€èµ·ä¹Ÿæ„Ÿåˆ°å­¤å•ã€‚", "æ„Ÿåˆ°åç«‹ä¸å®‰å¿ƒç¥ä¸å®šã€‚", "æ„Ÿåˆ°è‡ªå·±æ²¡æœ‰ä»€ä¹ˆä»·å€¼ã€‚", "æ„Ÿåˆ°ç†Ÿæ‚‰çš„ä¸œè¥¿å˜æˆé™Œç”Ÿæˆ–ä¸è±¡æ˜¯çœŸçš„ã€‚",
            "å¤§å«æˆ–æ‘”ä¸œè¥¿ã€‚", "å®³æ€•ä¼šåœ¨å…¬å…±åœºåˆæ˜å€’ã€‚", "æ„Ÿåˆ°åˆ«äººæƒ³å æ‚¨çš„ä¾¿å®œã€‚", "ä¸ºä¸€äº›æœ‰å…³'æ€§'çš„æƒ³æ³•è€Œå¾ˆè‹¦æ¼ã€‚", "æ‚¨è®¤ä¸ºåº”è¯¥å› ä¸ºè‡ªå·±çš„è¿‡é”™è€Œå—åˆ°æƒ©ç½šã€‚",
            "æ„Ÿåˆ°è¦èµ¶å¿«æŠŠäº‹æƒ…åšå®Œã€‚", "æ„Ÿåˆ°è‡ªå·±çš„èº«ä½“æœ‰ä¸¥é‡é—®é¢˜ã€‚", "ä»æœªæ„Ÿåˆ°å’Œå…¶ä»–äººå¾ˆäº²è¿‘ã€‚", "æ„Ÿåˆ°è‡ªå·±æœ‰ç½ªã€‚", "æ„Ÿåˆ°è‡ªå·±çš„è„‘å­æœ‰æ¯›ç—…ã€‚"
        ];

        // å› å­åˆ†ç±»ï¼ˆ10ä¸ªå› å­ï¼Œæ¯ä¸ªå› å­åŒ…å«çš„é¢˜ç›®ç´¢å¼•ï¼‰
        const factors = {
            "èº¯ä½“åŒ–": {
                indices: [0, 3, 10, 11, 25, 40, 41, 47, 48, 51, 55, 61, 66, 71, 76],
                description: "åæ˜ ä¸»è§‚çš„èº«ä½“ä¸é€‚æ„Ÿï¼ŒåŒ…æ‹¬å¿ƒè¡€ç®¡ã€èƒƒè‚ é“ã€å‘¼å¸ç­‰ç³»ç»Ÿçš„ä¸»è¯‰ä¸é€‚ï¼Œä»¥åŠå¤´ç—›ã€èƒŒç—›ã€è‚Œè‚‰é…¸ç—›ç­‰å…¶ä»–èº¯ä½“è¡¨ç°ã€‚"
            },
            "å¼ºè¿«ç—‡çŠ¶": {
                indices: [1, 8, 13, 17, 24, 27, 35, 43, 44, 52, 59, 63, 64, 70, 72, 77, 85],
                description: "æŒ‡é‚£äº›æ˜çŸ¥æ²¡æœ‰å¿…è¦ï¼Œä½†åˆæ— æ³•æ‘†è„±çš„æ— æ„ä¹‰çš„æ€æƒ³ã€å†²åŠ¨å’Œè¡Œä¸ºï¼Œä»¥åŠä¸€äº›æ¯”è¾ƒä¸€èˆ¬çš„è®¤çŸ¥éšœç¢ã€‚"
            },
            "äººé™…å…³ç³»æ•æ„Ÿ": {
                indices: [5, 20, 32, 33, 36, 37, 58, 62, 68, 73, 74, 78, 79, 80, 83, 86, 87],
                description: "æŒ‡ä¸ä»–äººäº¤å¾€æ—¶çš„è‡ªå‘æ„Ÿã€ä¸è‡ªåœ¨æ„Ÿã€æ¶ˆææœŸå¾…å’Œäººé™…äº¤æµä¸­çš„è‡ªæˆ‘æ„è¯†ã€‚"
            },
            "æŠ‘éƒ": {
                indices: [2, 9, 14, 18, 26, 28, 30, 34, 38, 42, 45, 49, 50, 53, 54, 56, 57, 60, 69, 75, 81, 82, 84, 88, 89],
                description: "åæ˜ ä¸ä¸´åºŠæŠ‘éƒç—‡çŠ¶ç¾¤ç›¸è”ç³»çš„å¹¿æ³›æ¦‚å¿µï¼ŒåŒ…æ‹¬å¿§éƒã€å…´è¶£å‡é€€ã€å¤±æœ›ã€æ‚²è§‚åŠä¸æŠ‘éƒæœ‰å…³çš„æƒ…æ„Ÿã€è®¤çŸ¥å’Œèº¯ä½“æ–¹é¢çš„é—®é¢˜ã€‚"
            },
            "ç„¦è™‘": {
                indices: [7, 12, 15, 16, 21, 22, 23, 29, 31, 39, 46, 57, 65, 67, 71],
                description: "åæ˜ ä¸€ç³»åˆ—ä¸ç„¦è™‘ç—‡çŠ¶ç›¸å…³çš„æƒ…æ„Ÿã€è®¤çŸ¥å’Œèº¯ä½“è¡¨ç°ï¼ŒåŒ…æ‹¬ç´§å¼ ã€ææƒ§ã€æ‹…å¿§ä»¥åŠç›¸åº”çš„èº¯ä½“æ„Ÿå—ã€‚"
            },
            "æ•Œå¯¹": {
                indices: [4, 19, 31, 40, 57, 62, 73, 77, 81, 86],
                description: "ä¸»è¦ä»æ€æƒ³ã€æƒ…æ„Ÿå’Œè¡Œä¸ºä¸‰ä¸ªæ–¹é¢åæ˜ æ•Œå¯¹çš„è¡¨ç°ï¼ŒåŒ…æ‹¬åŒçƒ¦ã€äº‰è®ºã€æ‘”ç‰©ã€ä¸å¯æ§åˆ¶çš„è„¾æ°”çˆ†å‘ç­‰ã€‚"
            },
            "ææ€–": {
                indices: [7, 12, 20, 23, 29, 32, 39, 46, 52, 58, 65, 67, 71, 78, 85],
                description: "åæ˜ å¯¹ç‰¹å®šåœºæ‰€ã€ç‰©ä½“æˆ–æƒ…å¢ƒçš„ææƒ§ï¼Œå¦‚ç©ºæ—·åœºæ‰€ã€äººç¾¤ã€ç¤¾äº¤åœºåˆç­‰ã€‚"
            },
            "åæ‰§": {
                indices: [5, 6, 13, 17, 20, 33, 35, 36, 37, 62, 68, 74, 79, 80, 83, 86],
                description: "æŒ‡çŒœç–‘å’Œå…³ç³»å¦„æƒ³ç­‰ï¼ŒåŒ…æ‹¬æ•Œå¯¹ã€çŒœç–‘ã€å¤¸å¤§ã€è¢«å®³æ„Ÿå’Œè¢«åŠ¨ä½“éªŒç­‰ã€‚"
            },
            "ç²¾ç¥ç—…æ€§": {
                indices: [6, 13, 16, 17, 24, 27, 33, 35, 43, 52, 62, 63, 64, 66, 70, 72, 77, 83, 84, 88, 89],
                description: "åæ˜ ä¸€ç»„ç²¾ç¥ç—‡çŠ¶ï¼Œå¦‚å¹»å¬ã€æ€ç»´æ’­æ•£ã€è¢«æ§åˆ¶æ„Ÿç­‰ï¼Œä»¥åŠä¸€äº›ç²¾ç¥åˆ†è£‚ç—‡çŠ¶é¡¹ç›®ã€‚"
            },
            "å…¶ä»–": {
                indices: [9, 14, 26, 28, 30, 34, 38, 41, 42, 45, 47, 48, 49, 50, 53, 54, 56, 60, 61, 63, 65, 67, 69, 71, 72, 74, 75, 76, 78, 81, 82, 84, 85, 87, 88, 89],
                description: "åæ˜ ç¡çœ ã€é¥®é£ŸåŠæ­»äº¡è§‚å¿µç­‰ã€‚"
            }
        };

        // ==============================
        // å…‘æ¢ç ç›¸å…³å…¨å±€å˜é‡å’Œå‡½æ•°
        // ==============================

        // Edge Function åœ°å€ï¼ˆåç«¯éªŒè¯æ¥å£ï¼‰
        const EDGE_FUNCTION_URL = 'https://whxquysnluktjhkfnsql.supabase.co/functions/v1/validate-redemption-code';

        // å°çº¢ä¹¦é“¾æ¥
        const XIAOHONGSHU_LINK = 'https://xhslink.com/m/VBG910lgrY';

        // æ£€æŸ¥æ˜¯å¦å·²ç»éªŒè¯è¿‡å…‘æ¢ç ï¼ˆ24å°æ—¶å†…æœ‰æ•ˆï¼‰
        function checkAccess() {
            const savedToken = localStorage.getItem('scl90_access_token');
            const savedTime = localStorage.getItem('scl90_access_time');

            if (savedToken && savedTime) {
                const currentTime = new Date().getTime();
                const accessTime = parseInt(savedTime);
                if (currentTime - accessTime < 24 * 60 * 60 * 1000) {
                    return true;
                } else {
                    localStorage.removeItem('scl90_access_token');
                    localStorage.removeItem('scl90_access_time');
                }
            }
            return false;
        }

        // éªŒè¯å…‘æ¢ç ï¼ˆé€šè¿‡ Edge Functionï¼‰
        async function validateCode(inputCode) {
            const errorElement = document.getElementById('code-error');

            if (!inputCode) {
                errorElement.textContent = "è¯·è¾“å…¥å…‘æ¢ç ";
                return false;
            }

            errorElement.textContent = "éªŒè¯ä¸­...";

            try {
                // è°ƒç”¨ Edge Function éªŒè¯å…‘æ¢ç 
                const response = await fetch(EDGE_FUNCTION_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ code: inputCode })
                });

                const data = await response.json();

                if (!response.ok) {
                    throw new Error(data.error);
                }

                // éªŒè¯æˆåŠŸï¼Œä¿å­˜è®¿é—®è®°å½•
                localStorage.setItem('scl90_access_token', inputCode);
                localStorage.setItem('scl90_access_time', new Date().getTime().toString());

                document.getElementById('code-modal').classList.remove('active');
                startTest();
                return true;

            } catch (error) {
                errorElement.textContent = error.message || "å…‘æ¢ç éªŒè¯å¤±è´¥ï¼Œè¯·é‡è¯•";
                return false;
            }
        }

        // æ˜¾ç¤ºå…‘æ¢ç å¼¹çª—
        function showCodeModal() {
            document.getElementById('code-modal').classList.add('active');
            document.getElementById('code-input').value = '';
            document.getElementById('code-error').textContent = '';
            document.getElementById('code-input').focus();
        }

        // è·³è½¬åˆ°å°çº¢ä¹¦é“¾æ¥
        function goToXiaohongshu() {
            window.open(XIAOHONGSHU_LINK, '_blank');
        }

        // ==============================
        // SCL-90 çŠ¶æ€ç®¡ç†
        // ==============================

        let currentQuestion = 0;
        let answers = new Array(90).fill(null);
        let currentExpandedFactor = null;

        // DOMå…ƒç´ 
        const homePage = document.getElementById('homePage');
        const questionnairePage = document.getElementById('questionnairePage');
        const startBtn = document.getElementById('startBtn');
        const questionText = document.getElementById('questionText');
        const counter = document.getElementById('counter');
        const remaining = document.getElementById('remaining');
        const progress = document.getElementById('progress');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const submitBtn = document.getElementById('submitBtn');
        const resultContainer = document.getElementById('resultContainer');
        const overallResultTag = document.getElementById('overallResultTag');
        const summaryGrid = document.getElementById('summaryGrid');
        const healthIndicator = document.getElementById('healthIndicator');
        const healthLevel = document.getElementById('healthLevel');
        const topFactorContainer = document.getElementById('topFactorContainer');
        const factorGrid9 = document.getElementById('factorGrid9');
        const factorDetailExpanded = document.getElementById('factorDetailExpanded');
        const factorDetails = document.getElementById('factorDetails');
        const detailedInterpretation = document.getElementById('detailedInterpretation');
        const restartBtn = document.getElementById('restartBtn');
        const getCodeCard = document.getElementById('getCodeCard');
        const optionsContainer = document.getElementById('optionsContainer');
        let optionElements = document.querySelectorAll('.option');

        // åˆå§‹åŒ–
        function initQuestionnaire() {
            // é¦–é¡µäº‹ä»¶ç›‘å¬
            startBtn.addEventListener('click', function () {
                if (checkAccess()) {
                    startTest();
                } else {
                    showCodeModal();
                }
            });

            // ä¸ºè·å–å…‘æ¢ç å¡ç‰‡æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼ˆè·³è½¬åˆ°å°çº¢ä¹¦ï¼‰
            if (getCodeCard) {
                getCodeCard.addEventListener('click', function () {
                    goToXiaohongshu();
                });
            }

            // ä¸ºé€‰é¡¹æ·»åŠ ç‚¹å‡»äº‹ä»¶
            optionElements.forEach(option => {
                option.addEventListener('click', function () {
                    const value = parseInt(this.getAttribute('data-value'));
                    selectOption(value);
                });
            });

            // é—®å·æŒ‰é’®äº‹ä»¶
            prevBtn.addEventListener('click', goToPrevious);
            nextBtn.addEventListener('click', goToNext);
            submitBtn.addEventListener('click', function () {
                // ä¼˜åŒ–1ï¼šç‚¹å‡»æäº¤é—®å·ç›´æ¥è·³è½¬ç»“æœé¡µé¢
                displayResults();
            });

            // é‡æ–°æµ‹è¯•æŒ‰é’®
            restartBtn.addEventListener('click', restartTest);

            // å…‘æ¢ç å¼¹çª—äº‹ä»¶
            document.getElementById('modal-close').addEventListener('click', () => {
                document.getElementById('code-modal').classList.remove('active');
            });

            document.getElementById('cancel-btn').addEventListener('click', () => {
                document.getElementById('code-modal').classList.remove('active');
            });

            document.getElementById('confirm-btn').addEventListener('click', () => {
                const codeInput = document.getElementById('code-input').value;
                validateCode(codeInput);
            });

            // æŒ‰å›è½¦é”®ç¡®è®¤å…‘æ¢ç 
            document.getElementById('code-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    const codeInput = document.getElementById('code-input').value;
                    validateCode(codeInput);
                }
            });

            updateQuestion();
        }

        // å¼€å§‹æµ‹è¯•ï¼ˆåˆ‡æ¢åˆ°é—®å·é¡µï¼‰
        function startTest() {
            homePage.style.display = 'none';
            questionnairePage.style.display = 'block';
            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            window.scrollTo(0, 0);
        }

        // æ›´æ–°é¢˜ç›®æ˜¾ç¤º
        function updateQuestion() {
            questionText.textContent = `${currentQuestion + 1}. ${scl90Questions[currentQuestion]}`;
            counter.textContent = `ç¬¬ ${currentQuestion + 1} / 90 é¢˜`;
            remaining.textContent = `å‰©ä½™ ${90 - currentQuestion - 1} é¢˜`;
            progress.style.width = `${((currentQuestion + 1) / 90) * 100}%`;

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            prevBtn.disabled = currentQuestion === 0;

            if (currentQuestion === 89) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'block';
            } else {
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
            }

            // é«˜äº®å·²é€‰é€‰é¡¹
            optionElements.forEach(option => {
                const value = parseInt(option.getAttribute('data-value'));
                option.classList.remove('selected');
                if (answers[currentQuestion] === value) {
                    option.classList.add('selected');
                }
            });
        }

        // é€‰æ‹©é€‰é¡¹
        function selectOption(value) {
            answers[currentQuestion] = value;

            // æ›´æ–°é€‰é¡¹é«˜äº®
            optionElements.forEach(option => {
                option.classList.remove('selected');
                if (parseInt(option.getAttribute('data-value')) === value) {
                    option.classList.add('selected');
                }
            });

            // è‡ªåŠ¨è·³è½¬åˆ°ä¸‹ä¸€é¢˜ï¼ˆä¿®å¤ï¼šæ‰€æœ‰é¢˜ç›®éƒ½è‡ªåŠ¨è·³è½¬ï¼Œé™¤äº†æœ€åä¸€é¢˜ï¼‰
            if (currentQuestion < 89) {
                setTimeout(() => goToNext(), 200);
            }
        }

        // ä¸Šä¸€é¢˜
        function goToPrevious() {
            if (currentQuestion > 0) {
                currentQuestion--;
                updateQuestion();
            }
        }

        // ä¸‹ä¸€é¢˜
        function goToNext() {
            if (currentQuestion < 89) {
                currentQuestion++;
                updateQuestion();
            }
        }

        // è®¡ç®—ç»“æœ
        function calculateResults() {
            let factorScores = {};

            // è®¡ç®—æ¯ä¸ªå› å­çš„å¹³å‡åˆ†
            for (const [factorName, factorData] of Object.entries(factors)) {
                let sum = 0;
                let count = 0;

                factorData.indices.forEach(index => {
                    if (answers[index] !== null) {
                        sum += answers[index];
                        count++;
                    }
                });

                factorScores[factorName] = {
                    score: count > 0 ? (sum / count).toFixed(2) : 0,
                    total: sum,
                    count: count
                };
            }

            // è®¡ç®—æ€»åˆ†å’Œæ€»å‡åˆ†
            const totalScore = answers.filter(a => a !== null).reduce((sum, a) => sum + a, 0);
            const answeredCount = answers.filter(a => a !== null).length;
            const averageScore = answeredCount > 0 ? (totalScore / answeredCount).toFixed(2) : 0;

            // é˜³æ€§é¡¹ç›®æ•°ï¼ˆè¯„åˆ†â‰¥2çš„é¡¹ç›®ï¼‰
            const positiveItems = answers.filter(a => a !== null && a >= 2).length;
            // é˜´æ€§é¡¹ç›®æ•°ï¼ˆè¯„åˆ†=0æˆ–1çš„é¡¹ç›®ï¼‰
            const negativeItems = answers.filter(a => a !== null && a < 2).length;
            // é˜³æ€§ç—‡çŠ¶å‡åˆ†
            const negativeTotal = answers.filter(a => a !== null && a < 2).reduce((sum, a) => sum + a, 0);
            const positiveAverage = positiveItems > 0 ? ((totalScore - negativeTotal) / positiveItems).toFixed(2) : 0;

            return {
                factorScores,
                totalScore,
                averageScore,
                positiveItems,
                negativeItems,
                positiveAverage
            };
        }

        // è·å–æ€»åˆ†å¯¹åº”çš„é¢œè‰²ç±»
        function getTotalScoreColor(totalScore) {
            // SCL-90æ€»åˆ†èŒƒå›´ï¼š0-360åˆ†
            // æ ¹æ®æ€»åˆ†èŒƒå›´è®¾ç½®é¢œè‰²
            if (totalScore < 90) {
                return "score-excellent"; // ä¼˜ç§€/è‰¯å¥½ï¼š<90åˆ†
            } else if (totalScore < 150) {
                return "score-good"; // è‰¯å¥½ï¼š90-149åˆ†
            } else if (totalScore < 210) {
                return "score-moderate"; // ä¸­ç­‰/éœ€è¦æ³¨æ„ï¼š150-209åˆ†
            } else if (totalScore < 270) {
                return "score-concern"; // éœ€è¦å…³æ³¨ï¼š210-269åˆ†
            } else {
                return "score-serious"; // ä¸¥é‡ï¼šâ‰¥270åˆ†
            }
        }

        // è·å–å› å­çŠ¶æ€å’Œé¢œè‰²
        function getFactorStatusAndColor(score) {
            const numericScore = parseFloat(score);

            if (numericScore < 1.5) {
                return {
                    status: "æ­£å¸¸",
                    statusClass: "status-normal",
                    color: "#27ae60", // ç»¿è‰²
                    level: "good"
                };
            } else if (numericScore < 2.5) {
                return {
                    status: "è½»åº¦",
                    statusClass: "status-mild",
                    color: "#f39c12", // æ©™è‰²
                    level: "mild"
                };
            } else if (numericScore < 3.5) {
                return {
                    status: "ä¸­åº¦",
                    statusClass: "status-moderate",
                    color: "#e74c3c", // çº¢è‰²
                    level: "moderate"
                };
            } else {
                return {
                    status: "é‡åº¦",
                    statusClass: "status-severe",
                    color: "#c0392b", // æ·±çº¢è‰²
                    level: "severe"
                };
            }
        }

        // è·å–æ€»ä½“è¯„ä¼°ç»“æœ
        function getOverallResult(avgScore) {
            const numericScore = parseFloat(avgScore);

            if (numericScore < 1.0) {
                return {
                    text: "è‰¯å¥½",
                    class: "result-tag-good",
                    color: "#27ae60",
                    level: "good"
                };
            } else if (numericScore < 1.5) {
                return {
                    text: "æ­£å¸¸",
                    class: "result-tag-normal",
                    color: "#f39c12",
                    level: "normal"
                };
            } else if (numericScore < 2.5) {
                return {
                    text: "éœ€è¦å…³æ³¨",
                    class: "result-tag-concern",
                    color: "#e74c3c",
                    level: "concern"
                };
            } else {
                return {
                    text: "éœ€è¦å¸®åŠ©",
                    class: "result-tag-severe",
                    color: "#c0392b",
                    level: "severe"
                };
            }
        }

        // è·å–å¿ƒç†å¥åº·æŒ‡ç¤ºå™¨ç»“æœ
        function getHealthIndicatorResult(avgScore) {
            const numericScore = parseFloat(avgScore);
            let indicatorWidth = 0;

            if (numericScore < 1.0) {
                indicatorWidth = 25;
                return {
                    text: "å¿ƒç†å¥åº·çŠ¶æ€è‰¯å¥½",
                    class: "health-level-good",
                    width: indicatorWidth,
                    level: "good"
                };
            } else if (numericScore < 1.5) {
                indicatorWidth = 50;
                return {
                    text: "å¿ƒç†å¥åº·çŠ¶æ€æ­£å¸¸",
                    class: "health-level-normal",
                    width: indicatorWidth,
                    level: "normal"
                };
            } else if (numericScore < 2.5) {
                indicatorWidth = 75;
                return {
                    text: "éœ€è¦å…³æ³¨å¿ƒç†å¥åº·",
                    class: "health-level-concern",
                    width: indicatorWidth,
                    level: "concern"
                };
            } else {
                indicatorWidth = 95;
                return {
                    text: "å»ºè®®å¯»æ±‚ä¸“ä¸šå¸®åŠ©",
                    class: "health-level-concern",
                    width: indicatorWidth,
                    level: "severe"
                };
            }
        }

        // æ˜¾ç¤ºè¯¦ç»†ç»“æœ
        function displayResults() {
            const {
                factorScores,
                totalScore,
                averageScore,
                positiveItems,
                negativeItems,
                positiveAverage
            } = calculateResults();

            // è·å–æ€»åˆ†é¢œè‰²ç±»
            const totalScoreColorClass = getTotalScoreColor(totalScore);

            // æ›´æ–°æ€»ä½“è¯„ä¼°æ ‡ç­¾ - æ ¹æ®å®é™…ç»“æœå˜åŒ–
            const overallResult = getOverallResult(averageScore);
            overallResultTag.textContent = overallResult.text;
            overallResultTag.className = `assessment-result-tag ${overallResult.class}`;

            // æ›´æ–°æ€»ä½“ç»“æœæ‘˜è¦
            summaryGrid.innerHTML = `
                <div class="assessment-item">
                    <div class="assessment-value ${totalScoreColorClass}">${totalScore}</div>
                    <div class="assessment-label">æ€»åˆ†</div>
                    <div class="assessment-note">èŒƒå›´ï¼š0-360</div>
                </div>
                <div class="assessment-item">
                    <div class="assessment-value">${averageScore}</div>
                    <div class="assessment-label">æ€»å‡åˆ†</div>
                    <div class="assessment-note">å‡åˆ†â‰¥1.5éœ€å…³æ³¨</div>
                </div>
                <div class="assessment-item">
                    <div class="assessment-value">${positiveItems}</div>
                    <div class="assessment-label">é˜³æ€§é¡¹ç›®</div>
                    <div class="assessment-note">å•é¡¹åˆ†â‰¥2çš„é¡¹ç›®</div>
                </div>
                <div class="assessment-item">
                    <div class="assessment-value">${positiveAverage}</div>
                    <div class="assessment-label">é˜³æ€§å‡åˆ†</div>
                    <div class="assessment-note">é˜³æ€§é¡¹ç›®å¹³å‡åˆ†</div>
                </div>
            `;

            // æ›´æ–°å¥åº·æŒ‡ç¤ºå™¨ - æ ¹æ®å®é™…ç»“æœå˜åŒ–
            const healthResult = getHealthIndicatorResult(averageScore);
            healthIndicator.style.width = `${healthResult.width}%`;
            healthLevel.innerHTML = `<span class="${healthResult.class}">${healthResult.text}</span>`;

            // æ‰¾å‡ºæœ€ä¸¥é‡çš„å› å­
            let sortedFactors = Object.entries(factorScores)
                .sort((a, b) => parseFloat(b[1].score) - parseFloat(a[1].score));

            let topFactor = sortedFactors[0];
            let otherFactors = sortedFactors.slice(1);

            // æ˜¾ç¤ºæœ€ä¸¥é‡å› å­
            if (topFactor) {
                const [factorName, factorData] = topFactor;
                const numericScore = parseFloat(factorData.score);
                const barWidth = (numericScore / 4) * 100;
                const factorStatus = getFactorStatusAndColor(factorData.score);

                topFactorContainer.innerHTML = `
                    <div class="top-factor-card">
                        <div class="top-factor-header">
                            <div class="top-factor-name">${factorName} - æœ€å…³æ³¨ç»´åº¦</div>
                            <div class="top-factor-score" style="color:${factorStatus.color}">${factorData.score}</div>
                        </div>
                        <div class="top-factor-bar">
                            <div class="top-factor-fill" style="width: ${barWidth}%"></div>
                        </div>
                        <div class="top-factor-interpretation">
                            <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                                <span><strong>çŠ¶æ€ï¼š</strong><span style="color:${factorStatus.color}; font-weight:600;">${factorStatus.status}</span></span>
                                <span><strong>é¡¹ç›®æ•°ï¼š</strong>${factorData.count}</span>
                            </div>
                            <p style="margin-top:10px;">${factors[factorName].description}</p>
                        </div>
                    </div>
                `;
            }

            // æ˜¾ç¤º9å®«æ ¼çš„å…¶ä»–å› å­
            let factorGridHTML = '';
            otherFactors.forEach(([factorName, factorData]) => {
                const factorStatus = getFactorStatusAndColor(factorData.score);

                factorGridHTML += `
                    <div class="factor-item" data-factor="${factorName}">
                        <div class="factor-item-name">${factorName}</div>
                        <div class="factor-item-score" style="color:${factorStatus.color}">${factorData.score}</div>
                        <div class="factor-item-status ${factorStatus.statusClass}">${factorStatus.status}</div>
                    </div>
                `;
            });
            factorGrid9.innerHTML = factorGridHTML;

            // ä¸ºå®«æ ¼æ·»åŠ ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.factor-item').forEach(item => {
                item.addEventListener('click', function () {
                    const factorName = this.getAttribute('data-factor');
                    showFactorDetail(factorName, factorScores[factorName]);
                });
            });

            // éšè—å› å­è¯¦ç»†å±•å¼€åŒºåŸŸ
            factorDetailExpanded.classList.remove('active');
            currentExpandedFactor = null;

            // æ˜¾ç¤ºå› å­è¯¦ç»†è§£è¯»
            let factorDetailsHTML = `
                <h3 class="factor-details-title"><i class="fas fa-info-circle"></i> å„ç»´åº¦è¯¦ç»†è§£è¯»</h3>
                <div class="factor-details-grid" id="factorDetailsGrid">
            `;

            for (const [factorName, factorData] of Object.entries(factorScores)) {
                const numericScore = parseFloat(factorData.score);
                const factorStatus = getFactorStatusAndColor(factorData.score);
                const barWidth = (numericScore / 4) * 100;

                factorDetailsHTML += `
                    <div class="factor-detail-card">
                        <div class="factor-detail-header">
                            <div class="factor-detail-name">${factorName}</div>
                            <div class="factor-detail-score" style="color:${factorStatus.color}">${factorData.score}</div>
                        </div>
                        <div class="factor-detail-bar">
                            <div class="factor-detail-fill" style="width: ${barWidth}%; background: linear-gradient(to right, ${factorStatus.color}, ${factorStatus.color}99);"></div>
                        </div>
                        <div class="factor-detail-interpretation">
                            <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                                <span><strong>çŠ¶æ€ï¼š</strong><span style="color:${factorStatus.color}; font-weight:600;">${factorStatus.status}</span></span>
                                <span><strong>é¡¹ç›®æ•°ï¼š</strong>${factorData.count}</span>
                            </div>
                            <p style="margin-top:10px;">${factors[factorName].description}</p>
                        </div>
                    </div>
                `;
            }

            factorDetailsHTML += `</div>`;
            factorDetails.innerHTML = factorDetailsHTML;

            // æ›´æ–°ä¼˜åŒ–åçš„è¯¦ç»†è§£è¯»
            let interpretationHTML = generateDetailedInterpretation(factorScores, averageScore, positiveItems, totalScore);
            detailedInterpretation.innerHTML = interpretationHTML;

            // æ˜¾ç¤ºç»“æœé¡µé¢
            resultContainer.style.display = 'block';

            // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
            resultContainer.scrollIntoView({ behavior: 'smooth' });
        }

        // æ˜¾ç¤ºå› å­è¯¦æƒ… - åœ¨å®«æ ¼ä¸‹æ–¹å±•å¼€
        function showFactorDetail(factorName, factorData) {
            // å¦‚æœå·²ç»å±•å¼€çš„æ˜¯å½“å‰å› å­ï¼Œåˆ™å…³é—­
            if (currentExpandedFactor === factorName) {
                factorDetailExpanded.classList.remove('active');
                currentExpandedFactor = null;
                return;
            }

            const factorStatus = getFactorStatusAndColor(factorData.score);
            const numericScore = parseFloat(factorData.score);
            const barWidth = (numericScore / 4) * 100;

            // åˆ›å»ºè¯¦æƒ…å†…å®¹
            const detailHTML = `
                <div class="expanded-factor-header">
                    <div class="expanded-factor-name">${factorName} ç»´åº¦è¯¦æƒ…</div>
                    <div class="expanded-factor-score" style="color:${factorStatus.color}">${factorData.score}</div>
                </div>
                
                <div class="expanded-factor-bar">
                    <div class="expanded-factor-fill" style="width: ${barWidth}%; background: linear-gradient(to right, ${factorStatus.color}, ${factorStatus.color}99);"></div>
                </div>
                
                <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                    <span style="color: #7f8c8d; font-size: 0.9rem;">æ­£å¸¸èŒƒå›´</span>
                    <span style="color: #7f8c8d; font-size: 0.9rem;">ä¸¥é‡</span>
                </div>
                
                <div style="text-align: center; margin: 15px 0;">
                    <span class="factor-item-status ${factorStatus.statusClass}" style="font-size: 1.1rem; padding: 8px 16px;">${factorStatus.status}ç—‡çŠ¶</span>
                </div>
                
                <div class="expanded-factor-description">
                    <h5 style="color: #2c3e50; margin-bottom: 10px; display: flex; align-items: center;">
                        <i class="fas fa-info-circle" style="color: #3498db; margin-right: 8px;"></i> ç»´åº¦è¯´æ˜
                    </h5>
                    <p>${factors[factorName].description}</p>
                    
                    <div style="display: flex; justify-content: space-between; margin-top: 15px;">
                        <div style="text-align: center;">
                            <div style="font-size: 1.2rem; font-weight: 700; color: #2c3e50;">${factorData.count}</div>
                            <div style="font-size: 0.9rem; color: #7f8c8d;">åŒ…å«é¡¹ç›®æ•°</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.2rem; font-weight: 700; color: #2c3e50;">${factorData.total}</div>
                            <div style="font-size: 0.9rem; color: #7f8c8d;">é¡¹ç›®æ€»åˆ†</div>
                        </div>
                    </div>
                </div>
                
                <div class="expanded-factor-suggestion">
                    <h5><i class="fas fa-lightbulb"></i> å»ºè®®</h5>
                    <p>${getFactorSuggestion(factorName, numericScore)}</p>
                </div>
                
                <div class="expanded-factor-close">
                    <button id="close-factor-detail">å…³é—­è¯¦æƒ…</button>
                </div>
            `;

            factorDetailExpanded.innerHTML = detailHTML;
            factorDetailExpanded.classList.add('active');
            currentExpandedFactor = factorName;

            // æ·»åŠ å…³é—­æŒ‰é’®äº‹ä»¶
            document.getElementById('close-factor-detail').addEventListener('click', () => {
                factorDetailExpanded.classList.remove('active');
                currentExpandedFactor = null;
            });

            // æ»šåŠ¨åˆ°å±•å¼€çš„åŒºåŸŸ
            factorDetailExpanded.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // è·å–å› å­å»ºè®®
        function getFactorSuggestion(factorName, score) {
            if (score < 1.5) {
                return "è¯¥ç»´åº¦å¤„äºæ­£å¸¸èŒƒå›´ï¼Œç»§ç»­ä¿æŒè‰¯å¥½çš„å¿ƒç†çŠ¶æ€å’Œç”Ÿæ´»ä¹ æƒ¯å³å¯ã€‚";
            }

            let suggestion = "";

            if (factorName === 'æŠ‘éƒ') {
                suggestion = score < 2.5 ?
                    "å»ºè®®å¢åŠ ç¤¾äº¤æ´»åŠ¨ï¼ŒåŸ¹å…»å…´è¶£çˆ±å¥½ï¼Œä¿æŒè§„å¾‹ä½œæ¯ï¼Œå¤šå‚ä¸æˆ·å¤–æ´»åŠ¨ã€‚" :
                    "å»ºè®®è€ƒè™‘å¿ƒç†å’¨è¯¢æˆ–ä¸“ä¸šè¯„ä¼°ï¼Œå­¦ä¹ æƒ…ç»ªç®¡ç†æŠ€å·§ï¼Œå¿…è¦æ—¶å¯»æ±‚ä¸“ä¸šå¸®åŠ©ã€‚";
            } else if (factorName === 'ç„¦è™‘') {
                suggestion = score < 2.5 ?
                    "å°è¯•æ”¾æ¾æŠ€å·§å¦‚æ·±å‘¼å¸ã€å†¥æƒ³ï¼Œå‡å°‘å’–å•¡å› æ‘„å…¥ï¼Œç»ƒä¹ æ­£å¿µå‡å‹ã€‚" :
                    "è€ƒè™‘å­¦ä¹ è®¤çŸ¥è¡Œä¸ºç–—æ³•æŠ€å·§æˆ–å¯»æ±‚ä¸“ä¸šå¸®åŠ©ï¼Œå»ºç«‹åº”å¯¹ç„¦è™‘çš„ç­–ç•¥ã€‚";
            } else if (factorName === 'å¼ºè¿«ç—‡çŠ¶') {
                suggestion = score < 2.5 ?
                    "å°è¯•é€æ¸å‡å°‘é‡å¤è¡Œä¸ºï¼Œåˆ†æ•£æ³¨æ„åŠ›åˆ°å…¶ä»–æ´»åŠ¨ï¼Œç»ƒä¹ æ¥å—ä¸ç¡®å®šæ€§ã€‚" :
                    "ä¸“ä¸šæ²»ç–—å¦‚æš´éœ²ä¸ååº”é¢„é˜²å¯èƒ½æœ‰ç›Šï¼Œå»ºè®®å¯»æ±‚å¿ƒç†æ²»ç–—å¸ˆå¸®åŠ©ã€‚";
            } else if (factorName === 'äººé™…å…³ç³»æ•æ„Ÿ') {
                suggestion = score < 2.5 ?
                    "ç»ƒä¹ ç¤¾äº¤æŠ€å·§ï¼Œå‚åŠ å›¢ä½“æ´»åŠ¨ï¼Œå¢å¼ºè‡ªä¿¡å¿ƒï¼Œå­¦ä¹ æœ‰æ•ˆæ²Ÿé€šã€‚" :
                    "äººé™…å…³ç³»æ²»ç–—æˆ–ç¤¾äº¤æŠ€èƒ½è®­ç»ƒå¯èƒ½æœ‰å¸®åŠ©ï¼Œè€ƒè™‘å‚åŠ ç›¸å…³å·¥ä½œåŠã€‚";
            } else if (factorName === 'èº¯ä½“åŒ–') {
                suggestion = score < 2.5 ?
                    "å®šæœŸä½“æ£€æ’é™¤å™¨è´¨æ€§ç–¾ç—…ï¼Œå­¦ä¹ èº«å¿ƒæ”¾æ¾æŠ€å·§ï¼Œå¦‚æ¸è¿›å¼è‚Œè‚‰æ”¾æ¾ã€‚" :
                    "å»ºè®®èº«å¿ƒåŒ»å­¦æˆ–å¿ƒç†ç”Ÿç†æ²»ç–—è¯„ä¼°ï¼Œå­¦ä¹ å‹åŠ›ç®¡ç†å’Œæ”¾æ¾æŠ€å·§ã€‚";
            } else if (factorName === 'æ•Œå¯¹') {
                suggestion = "å­¦ä¹ æƒ…ç»ªç®¡ç†æŠ€å·§ï¼Œç»ƒä¹ å†·é™æ€è€ƒï¼Œé¿å…å†²åŠ¨ååº”ï¼Œå¯»æ‰¾å¥åº·çš„æƒ…ç»ªå®£æ³„æ–¹å¼ã€‚";
            } else if (factorName === 'ææ€–') {
                suggestion = "å°è¯•æ¸è¿›å¼æš´éœ²ç–—æ³•ï¼Œå­¦ä¹ æ”¾æ¾æŠ€å·§ï¼Œé€æ­¥é¢å¯¹ææƒ§æƒ…å¢ƒã€‚";
            } else if (factorName === 'åæ‰§') {
                suggestion = "ç»ƒä¹ ä¿¡ä»»ä»–äººï¼Œå­¦ä¹ åŒºåˆ†ç°å®ä¸æƒ³è±¡ï¼Œè€ƒè™‘è®¤çŸ¥è¡Œä¸ºç–—æ³•ã€‚";
            } else if (factorName === 'ç²¾ç¥ç—…æ€§') {
                suggestion = "å»ºè®®å¯»æ±‚ä¸“ä¸šç²¾ç¥ç§‘è¯„ä¼°ï¼Œå­¦ä¹ ç°å®æ£€éªŒæŠ€å·§ï¼Œå»ºç«‹æ”¯æŒç³»ç»Ÿã€‚";
            } else {
                suggestion = "å…³æ³¨ç¡çœ è´¨é‡ï¼Œå»ºç«‹è§„å¾‹çš„ä½œæ¯ï¼Œå­¦ä¹ å‹åŠ›ç®¡ç†æŠ€å·§ã€‚";
            }

            return suggestion;
        }

        // ç”Ÿæˆè¯¦ç»†çš„è§£è¯»å†…å®¹
        function generateDetailedInterpretation(factorScores, averageScore, positiveItems, totalScore) {
            const avgScore = parseFloat(averageScore);
            const overallResult = getOverallResult(avgScore);

            // æ€»ä½“è¯„ä¼°éƒ¨åˆ†
            let overallAssessment = '';
            let overallLevel = '';
            let overallResultClass = '';

            if (avgScore < 1.0) {
                overallAssessment = 'æ ¹æ®æ‚¨çš„æµ‹è¯•ç»“æœï¼Œæ€»ä½“å¿ƒç†å¥åº·çŠ¶å†µè‰¯å¥½ã€‚æ‚¨çš„æ€»å‡åˆ†åœ¨æ­£å¸¸èŒƒå›´å†…ï¼ˆ<1.0ï¼‰ï¼Œè¡¨æ˜æœ€è¿‘ä¸€å‘¨å†…å¿ƒç†ç—‡çŠ¶è¾ƒå°‘ï¼Œå¿ƒç†å¥åº·çŠ¶æ€è¾ƒä¸ºç¨³å®šã€‚';
                overallLevel = 'è‰¯å¥½';
                overallResultClass = 'result-good';
            } else if (avgScore < 1.5) {
                overallAssessment = 'æ ¹æ®æ‚¨çš„æµ‹è¯•ç»“æœï¼Œæ€»ä½“å¿ƒç†å¥åº·çŠ¶å†µåœ¨æ­£å¸¸èŒƒå›´ã€‚æ‚¨çš„æ€»å‡åˆ†ç•¥é«˜ï¼ˆ1.0-1.5ï¼‰ï¼Œå¯èƒ½å­˜åœ¨è½»å¾®å¿ƒç†å›°æ‰°ï¼Œå»ºè®®å…³æ³¨è‡ªèº«çŠ¶æ€ï¼Œé‡‡å–é€‚å½“çš„è‡ªæˆ‘è°ƒèŠ‚æªæ–½ã€‚';
                overallLevel = 'æ­£å¸¸';
                overallResultClass = 'result-normal';
            } else if (avgScore < 2.5) {
                overallAssessment = 'æ ¹æ®æ‚¨çš„æµ‹è¯•ç»“æœï¼Œå¯èƒ½å­˜åœ¨ä¸€å®šç¨‹åº¦çš„å¿ƒç†å›°æ‰°ã€‚æ‚¨çš„æ€»å‡åˆ†è¶…è¿‡æ­£å¸¸èŒƒå›´ï¼ˆ1.5-2.5ï¼‰ï¼Œå»ºè®®å…³æ³¨å¿ƒç†å¥åº·ï¼Œå­¦ä¹ å‹åŠ›ç®¡ç†æŠ€å·§ï¼Œå¿…è¦æ—¶å¯»æ±‚ä¸“ä¸šæ”¯æŒã€‚';
                overallLevel = 'éœ€è¦å…³æ³¨';
                overallResultClass = 'result-concern';
            } else {
                overallAssessment = 'æ ¹æ®æ‚¨çš„æµ‹è¯•ç»“æœï¼Œæ˜¾ç¤ºå­˜åœ¨æ˜æ˜¾çš„å¿ƒç†å›°æ‰°ã€‚æ‚¨çš„æ€»å‡åˆ†è¾ƒé«˜ï¼ˆâ‰¥2.5ï¼‰ï¼Œå»ºè®®å°½å¿«å¯»æ±‚ä¸“ä¸šå¿ƒç†å¥åº·è¯„ä¼°å’Œå¸®åŠ©ï¼Œä»¥è·å¾—é€‚å½“çš„æ”¯æŒå’Œå¹²é¢„ã€‚';
                overallLevel = 'éœ€è¦ä¸“ä¸šå¸®åŠ©';
                overallResultClass = 'result-concern';
            }

            // æ‰¾å‡ºå¾—åˆ†æœ€é«˜çš„ä¸‰ä¸ªå› å­
            const sortedFactors = Object.entries(factorScores)
                .sort((a, b) => parseFloat(b[1].score) - parseFloat(a[1].score))
                .slice(0, 3);

            // ä¸»è¦å…³æ³¨é¢†åŸŸè§£è¯»
            let primaryConcerns = '';
            if (sortedFactors.length > 0) {
                primaryConcerns = `
                    <div class="recommendation-box">
                        <h5><i class="fas fa-exclamation-triangle"></i> ä¸»è¦å…³æ³¨é¢†åŸŸ</h5>
                        <p>æ ¹æ®æ‚¨çš„æµ‹è¯•ç»“æœï¼Œä»¥ä¸‹ä¸‰ä¸ªç»´åº¦å¾—åˆ†è¾ƒé«˜ï¼Œå¯èƒ½éœ€è¦ç‰¹åˆ«å…³æ³¨ï¼š</p>
                        <ul>
                            ${sortedFactors.map(([name, data]) => {
                    const score = parseFloat(data.score);
                    let suggestion = '';
                    if (name === 'æŠ‘éƒ') {
                        suggestion = score < 2.5 ? 'å»ºè®®å¢åŠ ç¤¾äº¤æ´»åŠ¨ï¼ŒåŸ¹å…»å…´è¶£çˆ±å¥½ï¼Œä¿æŒè§„å¾‹ä½œæ¯' : 'å»ºè®®è€ƒè™‘å¿ƒç†å’¨è¯¢æˆ–ä¸“ä¸šè¯„ä¼°';
                    } else if (name === 'ç„¦è™‘') {
                        suggestion = score < 2.5 ? 'å°è¯•æ”¾æ¾æŠ€å·§å¦‚æ·±å‘¼å¸ã€å†¥æƒ³ï¼Œå‡å°‘å’–å•¡å› æ‘„å…¥' : 'è€ƒè™‘å­¦ä¹ è®¤çŸ¥è¡Œä¸ºç–—æ³•æŠ€å·§æˆ–å¯»æ±‚ä¸“ä¸šå¸®åŠ©';
                    } else if (name === 'å¼ºè¿«ç—‡çŠ¶') {
                        suggestion = score < 2.5 ? 'å°è¯•é€æ¸å‡å°‘é‡å¤è¡Œä¸ºï¼Œåˆ†æ•£æ³¨æ„åŠ›åˆ°å…¶ä»–æ´»åŠ¨' : 'ä¸“ä¸šæ²»ç–—å¦‚æš´éœ²ä¸ååº”é¢„é˜²å¯èƒ½æœ‰ç›Š';
                    } else if (name === 'äººé™…å…³ç³»æ•æ„Ÿ') {
                        suggestion = score < 2.5 ? 'ç»ƒä¹ ç¤¾äº¤æŠ€å·§ï¼Œå‚åŠ å›¢ä½“æ´»åŠ¨ï¼Œå¢å¼ºè‡ªä¿¡å¿ƒ' : 'äººé™…å…³ç³»æ²»ç–—æˆ–ç¤¾äº¤æŠ€èƒ½è®­ç»ƒå¯èƒ½æœ‰å¸®åŠ©';
                    } else if (name === 'èº¯ä½“åŒ–') {
                        suggestion = score < 2.5 ? 'å®šæœŸä½“æ£€æ’é™¤å™¨è´¨æ€§ç–¾ç—…ï¼Œå­¦ä¹ èº«å¿ƒæ”¾æ¾æŠ€å·§' : 'å»ºè®®èº«å¿ƒåŒ»å­¦æˆ–å¿ƒç†ç”Ÿç†æ²»ç–—è¯„ä¼°';
                    } else {
                        suggestion = 'æ ¹æ®å…·ä½“æƒ…å†µé‡‡å–ç›¸åº”è°ƒèŠ‚æªæ–½';
                    }
                    return `<li><strong>${name}ï¼ˆå¾—åˆ†ï¼š${data.score}ï¼‰</strong> - ${suggestion}</li>`;
                }).join('')}
                        </ul>
                    </div>
                `;
            }

            // é˜³æ€§é¡¹ç›®æ•°è§£è¯»
            let positiveItemsInterpretation = '';
            if (positiveItems > 0) {
                let positiveLevel = '';
                if (positiveItems < 20) {
                    positiveLevel = 'è¾ƒå°‘ï¼Œè¡¨æ˜å¤§éƒ¨åˆ†æ—¶é—´å¿ƒç†çŠ¶æ€è‰¯å¥½';
                } else if (positiveItems < 40) {
                    positiveLevel = 'ä¸­ç­‰ï¼Œæç¤ºå­˜åœ¨ä¸€å®šç¨‹åº¦çš„å¿ƒç†å›°æ‰°';
                } else {
                    positiveLevel = 'è¾ƒå¤šï¼Œè¡¨æ˜å¿ƒç†å›°æ‰°è¾ƒä¸ºå¹¿æ³›';
                }

                positiveItemsInterpretation = `
                    <p><strong>é˜³æ€§é¡¹ç›®æ•°è§£è¯»ï¼š</strong>æ‚¨çš„æµ‹è¯•ç»“æœæ˜¾ç¤ºæœ‰ <strong>${positiveItems}</strong> ä¸ªé¡¹ç›®å¾—åˆ†â‰¥2ï¼Œ${positiveLevel}ã€‚</p>
                `;
            }

            // ä¸ªæ€§åŒ–å»ºè®®ç”Ÿæˆ
            let personalizedSuggestions = generatePersonalizedSuggestions(sortedFactors, avgScore);

            // ä½•æ—¶å¯»æ±‚ä¸“ä¸šå¸®åŠ©
            let whenToSeekHelp = '';
            if (avgScore >= 2.0 || sortedFactors.some(([_, data]) => parseFloat(data.score) >= 2.5)) {
                whenToSeekHelp = `
                    <div class="caution-box">
                        <h5><i class="fas fa-ambulance"></i> ä½•æ—¶è€ƒè™‘å¯»æ±‚ä¸“ä¸šå¸®åŠ©</h5>
                        <p>åŸºäºæ‚¨çš„æµ‹è¯•ç»“æœï¼Œå»ºè®®è€ƒè™‘å¯»æ±‚ä¸“ä¸šå¿ƒç†å¥åº·æœåŠ¡ï¼Œå¦‚æœï¼š</p>
                        <ul>
                            <li>è¿™äº›ç—‡çŠ¶æŒç»­è¶…è¿‡2å‘¨ä¸”å½±å“æ—¥å¸¸ç”Ÿæ´»</li>
                            <li>æ„Ÿåˆ°éš¾ä»¥æ§åˆ¶è‡ªå·±çš„æƒ…ç»ªæˆ–è¡Œä¸º</li>
                            <li>æœ‰è‡ªä¼¤æˆ–ä¼¤å®³ä»–äººçš„æƒ³æ³•</li>
                            <li>å·¥ä½œã€å­¦ä¹ æˆ–äººé™…å…³ç³»å—åˆ°æ˜æ˜¾å½±å“</li>
                            <li>è‡ªæˆ‘è°ƒèŠ‚æ–¹æ³•æ•ˆæœæœ‰é™</li>
                        </ul>
                        <p><strong>ä¸“ä¸šå¸®åŠ©å¯èƒ½åŒ…æ‹¬ï¼š</strong>å¿ƒç†å’¨è¯¢ã€å¿ƒç†æ²»ç–—ã€ç²¾ç¥ç§‘è¯„ä¼°ç­‰ã€‚</p>
                    </div>
                `;
            }

            // æ„å»ºå®Œæ•´çš„è§£è¯»HTML
            return `
                <h3 class="interpretation-title"><i class="fas fa-comment-medical"></i> ç»“æœè§£è¯»ä¸å»ºè®®</h3>
                
                <div class="interpretation-content">
                    <h4><i class="fas fa-stethoscope"></i> æ€»ä½“è¯„ä¼°</h4>
                    <p>${overallAssessment}</p>
                    <p><strong>è¯„ä¼°ç­‰çº§ï¼š</strong><span class="assessment-result-display ${overallResultClass}">${overallLevel}</span></p>
                    <p><strong>æ€»åˆ†è¯„ä¼°ï¼š</strong>æ‚¨çš„æ€»åˆ†ä¸º <strong>${totalScore}</strong> åˆ†ï¼ˆæ»¡åˆ†360åˆ†ï¼‰ï¼Œæ ¹æ®SCL-90é‡è¡¨æ ‡å‡†ï¼Œè¿™ä¸ªåˆ†æ•°${getScoreInterpretation(totalScore)}ã€‚</p>
                    ${positiveItemsInterpretation}
                    
                    ${primaryConcerns}
                    
                    <h4><i class="fas fa-lightbulb"></i> ä¸ªæ€§åŒ–å»ºè®®</h4>
                    ${personalizedSuggestions}
                    
                    ${whenToSeekHelp}
                </div>
                
                <div class="action-steps">
                    <h5><i class="fas fa-walking"></i> æ‚¨å¯ä»¥é‡‡å–çš„æ­¥éª¤</h5>
                    
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h6>è‡ªæˆ‘è§‚å¯Ÿä¸è®°å½•</h6>
                            <p>åœ¨æœªæ¥1-2å‘¨å†…ï¼Œæ¯å¤©èŠ±å‡ åˆ†é’Ÿè®°å½•æƒ…ç»ªå’Œç—‡çŠ¶å˜åŒ–ã€‚æ³¨æ„å“ªäº›æƒ…å†µä¼šåŠ é‡æˆ–å‡è½»ç—‡çŠ¶ï¼Œè¿™æœ‰åŠ©äºäº†è§£è§¦å‘å› ç´ ã€‚</p>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h6>å»ºç«‹å¥åº·ç”Ÿæ´»ä¹ æƒ¯</h6>
                            <p>ç¡®ä¿å……è¶³çš„ç¡çœ ï¼ˆ7-9å°æ—¶ï¼‰ï¼Œä¿æŒå‡è¡¡é¥®é£Ÿï¼Œæ¯å‘¨è¿›è¡Œè‡³å°‘150åˆ†é’Ÿä¸­ç­‰å¼ºåº¦è¿åŠ¨ã€‚è¿™äº›åŸºç¡€æªæ–½å¯¹å¿ƒç†å¥åº·è‡³å…³é‡è¦ã€‚</p>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h6>å­¦ä¹ å‹åŠ›ç®¡ç†æŠ€å·§</h6>
                            <p>å°è¯•æ­£å¿µå†¥æƒ³ã€æ·±å‘¼å¸ç»ƒä¹ ã€æ¸è¿›å¼è‚Œè‚‰æ”¾æ¾ç­‰æŠ€å·§ã€‚æ¯å¤©èŠ±10-15åˆ†é’Ÿç»ƒä¹ ï¼Œæœ‰åŠ©äºé™ä½ç„¦è™‘å’Œå‹åŠ›æ°´å¹³ã€‚</p>
                        </div>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h6>å»ºç«‹æ”¯æŒç³»ç»Ÿ</h6>
                            <p>ä¸ä¿¡ä»»çš„äº²å‹åˆ†äº«æ„Ÿå—ï¼Œå‚åŠ æ”¯æŒå°ç»„æˆ–ç¤¾åŒºæ´»åŠ¨ã€‚ç¤¾ä¼šæ”¯æŒæ˜¯å¿ƒç†å¥åº·çš„é‡è¦ä¿æŠ¤å› ç´ ã€‚</p>
                        </div>
                    </div>
                    
                    ${avgScore >= 1.5 ? `
                    <div class="step">
                        <div class="step-number">5</div>
                        <div class="step-content">
                            <h6>è€ƒè™‘ä¸“ä¸šè¯„ä¼°</h6>
                            <p>å¦‚æœç—‡çŠ¶æŒç»­æˆ–åŠ é‡ï¼Œå»ºè®®é¢„çº¦å¿ƒç†å¥åº·ä¸“ä¸šäººå‘˜ï¼ˆå¿ƒç†å’¨è¯¢å¸ˆã€å¿ƒç†æ²»ç–—å¸ˆæˆ–ç²¾ç¥ç§‘åŒ»ç”Ÿï¼‰è¿›è¡Œè¯„ä¼°ã€‚</p>
                        </div>
                    </div>
                    ` : ''}
                </div>
                
                <div class="resources-list">
                    <h4><i class="fas fa-book"></i> å¿ƒç†å¥åº·èµ„æºä¸å·¥å…·</h4>
                    
                    <div class="resource-item">
                        <div class="resource-title"><i class="fas fa-mobile-alt"></i> å¿ƒç†å¥åº·åº”ç”¨ç¨‹åº</div>
                        <p>Headspaceã€Calmã€Wysaç­‰åº”ç”¨æä¾›æ­£å¿µå†¥æƒ³ã€æƒ…ç»ªè·Ÿè¸ªå’Œè®¤çŸ¥è¡Œä¸ºç–—æ³•ç»ƒä¹ ã€‚</p>
                    </div>
                    
                    <div class="resource-item">
                        <div class="resource-title"><i class="fas fa-globe"></i> åœ¨çº¿èµ„æº</div>
                        <p>ä¸­å›½å¿ƒç†å­¦ä¼šã€ç®€å•å¿ƒç†ã€å£¹å¿ƒç†ç­‰å¹³å°æä¾›å¿ƒç†å¥åº·çŸ¥è¯†ã€è‡ªæˆ‘è¯„ä¼°å·¥å…·å’Œä¸“ä¸šæœåŠ¡ä¿¡æ¯ã€‚</p>
                    </div>
                    
                    <div class="resource-item">
                        <div class="resource-title"><i class="fas fa-phone-alt"></i> å¿ƒç†æ´åŠ©çƒ­çº¿</div>
                        <p>å…¨å›½å¿ƒç†æ´åŠ©çƒ­çº¿ï¼š400-161-9995ï¼ˆ24å°æ—¶ï¼‰ï¼›åŒ—äº¬å¿ƒç†å±æœºå¹²é¢„ä¸­å¿ƒï¼š010-82951332</p>
                    </div>
                </div>
                
                <div class="caution-box" style="margin-top: 25px;">
                    <h5><i class="fas fa-exclamation-circle"></i> é‡è¦è¯´æ˜</h5>
                    <p>1. æœ¬æµ‹è¯•ç»“æœä»…ä¾›å‚è€ƒï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šè¯Šæ–­ã€‚SCL-90æ˜¯ç­›æŸ¥å·¥å…·ï¼Œä¸æ˜¯è¯Šæ–­å·¥å…·ã€‚</p>
                    <p>2. æµ‹è¯•ç»“æœå¯èƒ½å—å¤šç§å› ç´ å½±å“ï¼ŒåŒ…æ‹¬æµ‹è¯•æ—¶æƒ…ç»ªçŠ¶æ€ã€ç¯å¢ƒã€å¯¹é¢˜ç›®çš„ç†è§£ç­‰ã€‚</p>
                    <p>3. å¦‚æœæ‚¨æœ‰ç´§æ€¥æƒ…å†µï¼ˆå¦‚è‡ªä¼¤æˆ–ä¼¤å®³ä»–äººçš„é£é™©ï¼‰ï¼Œè¯·ç«‹å³è”ç³» emergency services æˆ–å‰å¾€æœ€è¿‘åŒ»é™¢æ€¥è¯Šç§‘ã€‚</p>
                    <p>4. å®šæœŸè¿›è¡Œå¿ƒç†å¥åº·è‡ªè¯„æœ‰åŠ©äºäº†è§£è‡ªèº«çŠ¶æ€å˜åŒ–ï¼Œå»ºè®®æ¯1-3ä¸ªæœˆé‡æ–°è¯„ä¼°ä¸€æ¬¡ã€‚</p>
                </div>
            `;
        }

        // æ ¹æ®æ€»åˆ†è·å–è§£é‡Š
        function getScoreInterpretation(totalScore) {
            if (totalScore < 90) {
                return "å¤„äºæ­£å¸¸èŒƒå›´ï¼Œè¡¨æ˜æ‚¨çš„å¿ƒç†å¥åº·çŠ¶å†µè‰¯å¥½";
            } else if (totalScore < 150) {
                return "ç•¥é«˜äºæ­£å¸¸èŒƒå›´ï¼Œå¯èƒ½å­˜åœ¨è½»å¾®å¿ƒç†å›°æ‰°";
            } else if (totalScore < 210) {
                return "æ˜æ˜¾é«˜äºæ­£å¸¸èŒƒå›´ï¼Œæç¤ºå¯èƒ½å­˜åœ¨ä¸­ç­‰ç¨‹åº¦çš„å¿ƒç†å›°æ‰°";
            } else if (totalScore < 270) {
                return "æ˜¾è‘—é«˜äºæ­£å¸¸èŒƒå›´ï¼Œå»ºè®®å…³æ³¨å¿ƒç†å¥åº·å¹¶è€ƒè™‘ä¸“ä¸šè¯„ä¼°";
            } else {
                return "ä¸¥é‡é«˜äºæ­£å¸¸èŒƒå›´ï¼Œå»ºè®®å°½å¿«å¯»æ±‚ä¸“ä¸šå¿ƒç†å¥åº·å¸®åŠ©";
            }
        }

        // ç”Ÿæˆä¸ªæ€§åŒ–å»ºè®®
        function generatePersonalizedSuggestions(sortedFactors, avgScore) {
            let suggestions = '';

            // åŸºäºæ€»ä½“åˆ†æ•°çš„ä¸€èˆ¬å»ºè®®
            if (avgScore < 1.0) {
                suggestions = `
                    <p>æ‚¨çš„å¿ƒç†å¥åº·çŠ¶æ€è‰¯å¥½ï¼Œå¯ä»¥ç»§ç»­ä¿æŒå½“å‰çš„å¥åº·ä¹ æƒ¯ï¼š</p>
                    <ul>
                        <li>ä¿æŒè§„å¾‹çš„ç”Ÿæ´»ä½œæ¯å’Œé€‚é‡çš„ä½“è‚²æ´»åŠ¨</li>
                        <li>ç»´æŒç§¯æçš„ç¤¾äº¤å…³ç³»å’Œæƒ…æ„Ÿæ”¯æŒç³»ç»Ÿ</li>
                        <li>å­¦ä¹ å‹åŠ›ç®¡ç†æŠ€å·§ï¼Œå³ä½¿å½“å‰å‹åŠ›ä¸å¤§</li>
                        <li>å®šæœŸè¿›è¡Œå¿ƒç†å¥åº·è‡ªè¯„ï¼Œå…³æ³¨çŠ¶æ€å˜åŒ–</li>
                    </ul>
                `;
            } else if (avgScore < 1.5) {
                suggestions = `
                    <p>æ‚¨å¯èƒ½å­˜åœ¨è½»å¾®çš„å¿ƒç†å›°æ‰°ï¼Œä»¥ä¸‹å»ºè®®å¯èƒ½å¯¹æ‚¨æœ‰å¸®åŠ©ï¼š</p>
                    <ul>
                        <li>ç»ƒä¹ æ­£å¿µå†¥æƒ³ï¼Œæ¯å¤©10-15åˆ†é’Ÿï¼Œå¸®åŠ©æé«˜æƒ…ç»ªè§‰å¯Ÿèƒ½åŠ›</li>
                        <li>å»ºç«‹è§„å¾‹çš„ç¡çœ æ—¶é—´è¡¨ï¼Œç¡®ä¿å……è¶³ä¼‘æ¯</li>
                        <li>å‡å°‘å’–å•¡å› å’Œé…’ç²¾æ‘„å…¥ï¼Œå®ƒä»¬å¯èƒ½åŠ é‡ç„¦è™‘</li>
                        <li>å°è¯•å†™æƒ…ç»ªæ—¥è®°ï¼Œè®°å½•æ¯å¤©çš„æƒ…ç»ªæ³¢åŠ¨å’Œè§¦å‘å› ç´ </li>
                    </ul>
                `;
            } else if (avgScore < 2.5) {
                suggestions = `
                    <p>æ‚¨å¯èƒ½å­˜åœ¨ä¸­ç­‰ç¨‹åº¦çš„å¿ƒç†å›°æ‰°ï¼Œå»ºè®®é‡‡å–ä»¥ä¸‹æªæ–½ï¼š</p>
                    <ul>
                        <li>è€ƒè™‘å­¦ä¹ è®¤çŸ¥è¡Œä¸ºç–—æ³•ï¼ˆCBTï¼‰çš„è‡ªåŠ©æŠ€å·§ï¼Œè¯†åˆ«å’Œæ”¹å˜è´Ÿé¢æ€ç»´æ¨¡å¼</li>
                        <li>å»ºç«‹å›ºå®šçš„æ”¾æ¾æ—¶é—´ï¼Œå¦‚æ¯å¤©30åˆ†é’Ÿè¿›è¡Œå–œæ¬¢çš„æ”¾æ¾æ´»åŠ¨</li>
                        <li>ä¸ä¿¡ä»»çš„äººè®¨è®ºæ‚¨çš„æ„Ÿå—ï¼Œä¸è¦å­¤ç«‹è‡ªå·±</li>
                        <li>è€ƒè™‘çŸ­æœŸå¿ƒç†å’¨è¯¢ï¼Œå­¦ä¹ æ›´æœ‰æ•ˆçš„åº”å¯¹ç­–ç•¥</li>
                    </ul>
                `;
            } else {
                suggestions = `
                    <p>æ‚¨çš„æµ‹è¯•ç»“æœæ˜¾ç¤ºæ˜æ˜¾çš„å¿ƒç†å›°æ‰°ï¼Œå»ºè®®ï¼š</p>
                    <ul>
                        <li>å°½å¿«é¢„çº¦å¿ƒç†å¥åº·ä¸“ä¸šäººå‘˜è¿›è¡Œå…¨é¢è¯„ä¼°</li>
                        <li>è€ƒè™‘å¿ƒç†æ²»ç–—ï¼Œå¦‚è®¤çŸ¥è¡Œä¸ºç–—æ³•ã€äººé™…å…³ç³»ç–—æ³•ç­‰</li>
                        <li>åœ¨ä¸“ä¸šäººå‘˜æŒ‡å¯¼ä¸‹ï¼Œå¯èƒ½éœ€è¦è¯ç‰©æ²»ç–—é…åˆå¿ƒç†æ²»ç–—</li>
                        <li>å»ºç«‹å®‰å…¨è®¡åˆ’ï¼ŒåŒ…æ‹¬ç´§æ€¥è”ç³»äººåˆ—è¡¨å’Œå±æœºåº”å¯¹ç­–ç•¥</li>
                    </ul>
                `;
            }

            // åŸºäºé«˜å¾—åˆ†å› å­çš„å…·ä½“å»ºè®®
            if (sortedFactors.length > 0) {
                suggestions += `<p><strong>é’ˆå¯¹æ‚¨çš„å…·ä½“å…³æ³¨é¢†åŸŸï¼š</strong></p><ul>`;

                sortedFactors.forEach(([name, data]) => {
                    const score = parseFloat(data.score);
                    if (name === 'æŠ‘éƒ' && score >= 1.5) {
                        suggestions += `<li><strong>æŠ‘éƒï¼š</strong>å¢åŠ æ„‰å¿«æ´»åŠ¨å®‰æ’ï¼Œå³ä½¿å…´è¶£é™ä½ä¹Ÿå°è¯•å‚ä¸ï¼›è€ƒè™‘å…‰ç…§ç–—æ³•ï¼ˆå°¤å…¶æ˜¯å­£èŠ‚æ€§æŠ‘éƒï¼‰ï¼›å»ºç«‹è§„å¾‹çš„ç”Ÿæ´»ç»“æ„ã€‚</li>`;
                    }
                    if (name === 'ç„¦è™‘' && score >= 1.5) {
                        suggestions += `<li><strong>ç„¦è™‘ï¼š</strong>ç»ƒä¹ è…¹å¼æ·±å‘¼å¸ï¼›æ¸è¿›å¼æš´éœ²äºææƒ§æƒ…å¢ƒï¼ˆä»è½»åº¦å¼€å§‹ï¼‰ï¼›é™åˆ¶æ–°é—»å’Œç¤¾äº¤åª’ä½“æ¶ˆè´¹ã€‚</li>`;
                    }
                    if (name === 'å¼ºè¿«ç—‡çŠ¶' && score >= 1.5) {
                        suggestions += `<li><strong>å¼ºè¿«ç—‡çŠ¶ï¼š</strong>å°è¯•å»¶è¿Ÿæ‰§è¡Œå¼ºè¿«è¡Œä¸ºï¼›åˆ†æ•£æ³¨æ„åŠ›åˆ°å…¶ä»–æ´»åŠ¨ï¼›è®°å½•å¼ºè¿«æ€ç»´å‡ºç°é¢‘ç‡å’Œæƒ…å¢ƒã€‚</li>`;
                    }
                    if (name === 'äººé™…å…³ç³»æ•æ„Ÿ' && score >= 1.5) {
                        suggestions += `<li><strong>äººé™…å…³ç³»æ•æ„Ÿï¼š</strong>ç»ƒä¹ ç§¯æçš„è‡ªæˆ‘å¯¹è¯ï¼›å‚åŠ ç¤¾äº¤æŠ€èƒ½è®­ç»ƒå°ç»„ï¼›æŒ‘æˆ˜è´Ÿé¢çš„äººé™…å…³ç³»é¢„æœŸã€‚</li>`;
                    }
                });

                suggestions += `</ul>`;
            }

            return suggestions;
        }

        // é‡æ–°æµ‹è¯•
        function restartTest() {
            // é‡ç½®æ‰€æœ‰ç­”æ¡ˆ
            answers = new Array(90).fill(null);
            currentQuestion = 0;
            currentExpandedFactor = null;

            // éšè—ç»“æœé¡µ
            resultContainer.style.display = 'none';

            // éšè—å› å­è¯¦æƒ…å±•å¼€åŒºåŸŸ
            factorDetailExpanded.classList.remove('active');

            // é‡æ–°å¼€å§‹æµ‹è¯•
            updateQuestion();

            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            window.scrollTo(0, 0);
        }

        // ==============================
        // ä»£ç ä¿æŠ¤åŠŸèƒ½
        // ==============================

        // é˜²æ­¢å³é”®èœå•
        document.addEventListener('contextmenu', function (e) {
            e.preventDefault();
            return false;
        });

        // é˜²æ­¢å¿«æ·é”®
        document.addEventListener('keydown', function (e) {
            // ç¦ç”¨ F12
            if (e.key === 'F12') {
                e.preventDefault();
                return false;
            }
            // ç¦ç”¨ Ctrl+Shift+I
            if (e.ctrlKey && e.shiftKey && e.key === 'I') {
                e.preventDefault();
                return false;
            }
            // ç¦ç”¨ Ctrl+U
            if (e.ctrlKey && e.key === 'u') {
                e.preventDefault();
                return false;
            }
            // ç¦ç”¨ Ctrl+S
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                return false;
            }
            // ç¦ç”¨ Ctrl+Shift+J
            if (e.ctrlKey && e.shiftKey && e.key === 'J') {
                e.preventDefault();
                return false;
            }
            // ç¦ç”¨ Ctrl+Shift+C
            if (e.ctrlKey && e.shiftKey && e.key === 'C') {
                e.preventDefault();
                return false;
            }
            // ç¦ç”¨ Ctrl+A
            if (e.ctrlKey && e.key === 'a') {
                e.preventDefault();
                return false;
            }
        });

        // é˜²æ­¢æ–‡æœ¬é€‰æ‹©
        document.addEventListener('selectstart', function (e) {
            e.preventDefault();
            return false;
        });

        // é˜²æ­¢æ‹–æ‹½
        document.addEventListener('dragstart', function (e) {
            e.preventDefault();
            return false;
        });

        // é¢å¤–é”®ç›˜ä¿æŠ¤
        document.onkeydown = function (e) {
            if (e.keyCode == 123) { // F12
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) { // Ctrl+U
                return false;
            }
            if (e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) { // Ctrl+Shift+I
                return false;
            }
            if (e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) { // Ctrl+Shift+J
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'S'.charCodeAt(0)) { // Ctrl+S
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'A'.charCodeAt(0)) { // Ctrl+A
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'C'.charCodeAt(0)) { // Ctrl+C
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'X'.charCodeAt(0)) { // Ctrl+X
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'P'.charCodeAt(0)) { // Ctrl+P
                return false;
            }
        };

        // ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼šé˜²æ­¢åŒå‡»ç¼©æ”¾
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);

        // ä»£ç ä¿æŠ¤åŠŸèƒ½
        // ==============================

        // é˜²æ­¢å³é”®èœå•
        document.addEventListener('contextmenu', function (e) {
            e.preventDefault();
            return false;
        });

        // é˜²æ­¢å¿«æ·é”®
        document.addEventListener('keydown', function (e) {
            // ç¦ç”¨ F12
            if (e.key === 'F12') {
                e.preventDefault();
                return false;
            }
            // ç¦ç”¨ Ctrl+Shift+I
            if (e.ctrlKey && e.shiftKey && e.key === 'I') {
                e.preventDefault();
                return false;
            }
            // ç¦ç”¨ Ctrl+U
            if (e.ctrlKey && e.key === 'u') {
                e.preventDefault();
                return false;
            }
            // ç¦ç”¨ Ctrl+S
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                return false;
            }
            // ç¦ç”¨ Ctrl+Shift+J
            if (e.ctrlKey && e.shiftKey && e.key === 'J') {
                e.preventDefault();
                return false;
            }
            // ç¦ç”¨ Ctrl+Shift+C
            if (e.ctrlKey && e.shiftKey && e.key === 'C') {
                e.preventDefault();
                return false;
            }
            // ç¦ç”¨ Ctrl+A
            if (e.ctrlKey && e.key === 'a') {
                e.preventDefault();
                return false;
            }
        });

        // é˜²æ­¢æ–‡æœ¬é€‰æ‹©
        document.addEventListener('selectstart', function (e) {
            e.preventDefault();
            return false;
        });

        // é˜²æ­¢æ‹–æ‹½
        document.addEventListener('dragstart', function (e) {
            e.preventDefault();
            return false;
        });

        // é¢å¤–é”®ç›˜ä¿æŠ¤
        document.onkeydown = function (e) {
            if (e.keyCode == 123) { // F12
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) { // Ctrl+U
                return false;
            }
            if (e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) { // Ctrl+Shift+I
                return false;
            }
            if (e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) { // Ctrl+Shift+J
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'S'.charCodeAt(0)) { // Ctrl+S
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'A'.charCodeAt(0)) { // Ctrl+A
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'C'.charCodeAt(0)) { // Ctrl+C
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'X'.charCodeAt(0)) { // Ctrl+X
                return false;
            }
            if (e.ctrlKey && e.keyCode == 'P'.charCodeAt(0)) { // Ctrl+P
                return false;
            }
        };

        // åˆå§‹åŒ–é—®å·
        window.onload = initQuestionnaire;

    </script>
</body>

</html>
